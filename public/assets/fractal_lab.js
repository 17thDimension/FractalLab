(function(c,e){function k(a){return d.isWindow(a)?a:a.nodeType===9?a.defaultView||a.parentWindow:false}function r(a){if(!Ka[a]){var b=d("<"+a+">").appendTo("body"),f=b.css("display");b.remove();if(f==="none"||f==="")f="block";Ka[a]=f}return Ka[a]}function v(a,b){var f={};d.each(Ra.concat.apply([],Ra.slice(0,b)),function(){f[this]=a});return f}function E(a,b,f,g){d.isArray(b)&&b.length?d.each(b,function(h,i){f||jb.test(a)?g(a,i):E(a+"["+(typeof i==="object"||d.isArray(i)?h:"")+"]",i,f,g)}):f||b==null||
typeof b!=="object"?g(a,b):d.isArray(b)||d.isEmptyObject(b)?g(a,""):d.each(b,function(h,i){E(a+"["+h+"]",i,f,g)})}function J(a,b,f,g,h,i){h=h||b.dataTypes[0];i=i||{};i[h]=true;h=a[h];for(var m=0,p=h?h.length:0,s=a===La,D;m<p&&(s||!D);m++){D=h[m](b,f,g);typeof D==="string"&&(i[D]?D=e:(b.dataTypes.unshift(D),D=J(a,b,f,g,D,i)))}(s||!D)&&!i["*"]&&(D=J(a,b,f,g,"*",i));return D}function L(a){return function(b,f){typeof b!=="string"&&(f=b,b="*");if(d.isFunction(f))for(var g=b.toLowerCase().split(Sa),h=0,
i=g.length,m,p;h<i;h++){m=g[h];(p=/^\+/.test(m))&&(m=m.substr(1)||"*");m=a[m]=a[m]||[];m[p?"unshift":"push"](f)}}}function M(a,b,f){var g=b==="width"?a.offsetWidth:a.offsetHeight;if(f==="border")return g;d.each(b==="width"?kb:lb,function(){f||(g-=parseFloat(d.css(a,"padding"+this))||0);f==="margin"?g+=parseFloat(d.css(a,"margin"+this))||0:g-=parseFloat(d.css(a,"border"+this+"Width"))||0});return g}function X(a,b){b.src?d.ajax({url:b.src,async:false,dataType:"script"}):d.globalEval(b.text||b.textContent||
b.innerHTML||"");b.parentNode&&b.parentNode.removeChild(b)}function W(a,b){if(b.nodeType===1){var f=b.nodeName.toLowerCase();b.clearAttributes();b.mergeAttributes(a);if(f==="object")b.outerHTML=a.outerHTML;else if(f!=="input"||a.type!=="checkbox"&&a.type!=="radio")if(f==="option")b.selected=a.defaultSelected;else{if(f==="input"||f==="textarea")b.defaultValue=a.defaultValue}else{a.checked&&(b.defaultChecked=b.checked=a.checked);b.value!==a.value&&(b.value=a.value)}b.removeAttribute(d.expando)}}function Y(a,
b){if(b.nodeType===1&&d.hasData(a)){var f=d.expando,g=d.data(a),h=d.data(b,g);if(g=g[f]){var i=g.events;h=h[f]=d.extend({},g);if(i){delete h.handle;h.events={};for(var m in i){f=0;for(g=i[m].length;f<g;f++)d.event.add(b,m,i[m][f],i[m][f].data)}}}}}function ia(a,b,f){if(d.isFunction(b))return d.grep(a,function(h,i){return!!b.call(h,i,h)===f});if(b.nodeType)return d.grep(a,function(h){return h===b===f});if(typeof b==="string"){var g=d.grep(a,function(h){return h.nodeType===1});if(mb.test(b))return d.filter(b,
g,!f);b=d.filter(b,g)}return d.grep(a,function(h){return d.inArray(h,b)>=0===f})}function ja(a,b){return(a&&a!=="*"?a+".":"")+b.replace(S,"`").replace(ba,"&")}function ra(a){var b,f,g,h,i,m,p,s,D,I,N,O=[];h=[];i=d._data(this,ta);typeof i==="function"&&(i=i.events);if(a.liveFired!==this&&i&&i.live&&!a.target.disabled&&(!a.button||a.type!=="click")){a.namespace&&(N=RegExp("(^|\\.)"+a.namespace.split(".").join("\\.(?:.*\\.)?")+"(\\.|$)"));a.liveFired=this;var V=i.live.slice(0);for(p=0;p<V.length;p++){i=
V[p];i.origType.replace(B,"")===a.type?h.push(i.selector):V.splice(p--,1)}h=d(a.target).closest(h,a.currentTarget);s=0;for(D=h.length;s<D;s++){I=h[s];for(p=0;p<V.length;p++){i=V[p];if(I.selector===i.selector&&(!N||N.test(i.namespace))){m=I.elem;g=null;if(i.preType==="mouseenter"||i.preType==="mouseleave"){a.type=i.preType;g=d(a.relatedTarget).closest(i.selector)[0]}(!g||g!==m)&&O.push({elem:m,handleObj:i,level:I.level})}}}s=0;for(D=O.length;s<D;s++){h=O[s];if(f&&h.level>f)break;a.currentTarget=h.elem;
a.data=h.handleObj.data;a.handleObj=h.handleObj;N=h.handleObj.origHandler.apply(h.elem,arguments);if(N===false||a.isPropagationStopped()){f=h.level;N===false&&(b=false);if(a.isImmediatePropagationStopped())break}}return b}}function va(a,b,f){f[0].type=a;return d.event.handle.apply(b,f)}function oa(){return true}function pa(){return false}function Ea(a,b,f){if(f===e&&a.nodeType===1){f=a.getAttribute("data-"+b);if(typeof f==="string"){try{f=f==="true"?true:f==="false"?false:f==="null"?null:d.isNaN(f)?
Fa.test(f)?d.parseJSON(f):f:parseFloat(f)}catch(g){}d.data(a,b,f)}else f=e}return f}var n=c.document,d=function(){function a(){if(!b.isReady){try{n.documentElement.doScroll("left")}catch(o){setTimeout(a,1);return}b.ready()}}var b=function(o,x){return new b.fn.init(o,x,h)},f=c.jQuery,g=c.$,h,i=/^(?:[^<]*(<[\w\W]+>)[^>]*$|#([\w\-]+)$)/,m=/\S/,p=/^\s+/,s=/\s+$/,D=/\d/,I=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,N=/^[\],:{}\s]*$/,O=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,V=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
Z=/(?:^|:|,)(?:\s*\[)+/g,ea=/(webkit)[ \/]([\w.]+)/,ga=/(opera)(?:.*version)?[ \/]([\w.]+)/,j=/(msie) ([\w.]+)/,q=/(mozilla)(?:.*? rv:([\w.]+))?/,t=navigator.userAgent,y=false,w,A="then done fail isResolved isRejected promise".split(" "),G,H=Object.prototype.toString,Q=Object.prototype.hasOwnProperty,da=Array.prototype.push,ca=Array.prototype.slice,ha=String.prototype.trim,fa=Array.prototype.indexOf,T={};b.fn=b.prototype={constructor:b,init:function(o,x,C){var F,P;if(!o)return this;if(o.nodeType){this.context=
this[0]=o;this.length=1;return this}if(o==="body"&&!x&&n.body){this.context=n;this[0]=n.body;this.selector="body";this.length=1;return this}if(typeof o==="string"){F=i.exec(o);if(!F||!F[1]&&x)return!x||x.jquery?(x||C).find(o):this.constructor(x).find(o);if(F[1]){P=(x=x instanceof b?x[0]:x)?x.ownerDocument||x:n;(C=I.exec(o))?b.isPlainObject(x)?(o=[n.createElement(C[1])],b.fn.attr.call(o,x,true)):o=[P.createElement(C[1])]:(C=b.buildFragment([F[1]],[P]),o=(C.cacheable?b.clone(C.fragment):C.fragment).childNodes);
return b.merge(this,o)}if((x=n.getElementById(F[2]))&&x.parentNode){if(x.id!==F[2])return C.find(o);this.length=1;this[0]=x}this.context=n;this.selector=o;return this}if(b.isFunction(o))return C.ready(o);o.selector!==e&&(this.selector=o.selector,this.context=o.context);return b.makeArray(o,this)},selector:"",jquery:"1.5",length:0,size:function(){return this.length},toArray:function(){return ca.call(this,0)},get:function(o){return o==null?this.toArray():o<0?this[this.length+o]:this[o]},pushStack:function(o,
x,C){var F=this.constructor();b.isArray(o)?da.apply(F,o):b.merge(F,o);F.prevObject=this;F.context=this.context;x==="find"?F.selector=this.selector+(this.selector?" ":"")+C:x&&(F.selector=this.selector+"."+x+"("+C+")");return F},each:function(o,x){return b.each(this,o,x)},ready:function(o){b.bindReady();w.done(o);return this},eq:function(o){return o===-1?this.slice(o):this.slice(o,+o+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(ca.apply(this,
arguments),"slice",ca.call(arguments).join(","))},map:function(o){return this.pushStack(b.map(this,function(x,C){return o.call(x,C,x)}))},end:function(){return this.prevObject||this.constructor(null)},push:da,sort:[].sort,splice:[].splice};b.fn.init.prototype=b.fn;b.extend=b.fn.extend=function(){var o,x,C,F,P,R,U=arguments[0]||{},aa=1,na=arguments.length,ma=false;typeof U==="boolean"&&(ma=U,U=arguments[1]||{},aa=2);typeof U!=="object"&&!b.isFunction(U)&&(U={});for(na===aa&&(U=this,--aa);aa<na;aa++)if((o=
arguments[aa])!=null)for(x in o){C=U[x];F=o[x];if(U!==F)ma&&F&&(b.isPlainObject(F)||(P=b.isArray(F)))?(P?(P=false,R=C&&b.isArray(C)?C:[]):R=C&&b.isPlainObject(C)?C:{},U[x]=b.extend(ma,R,F)):F!==e&&(U[x]=F)}return U};b.extend({noConflict:function(o){c.$=g;o&&(c.jQuery=f);return b},isReady:false,readyWait:1,ready:function(o){o===true&&b.readyWait--;if(!b.readyWait||o!==true&&!b.isReady){if(!n.body)return setTimeout(b.ready,1);b.isReady=true;if(!(o!==true&&--b.readyWait>0)){w.resolveWith(n,[b]);b.fn.trigger&&
b(n).trigger("ready").unbind("ready")}}},bindReady:function(){if(!y){y=true;if(n.readyState==="complete")return setTimeout(b.ready,1);if(n.addEventListener){n.addEventListener("DOMContentLoaded",G,false);c.addEventListener("load",b.ready,false)}else if(n.attachEvent){n.attachEvent("onreadystatechange",G);c.attachEvent("onload",b.ready);var o=false;try{o=c.frameElement==null}catch(x){}n.documentElement.doScroll&&o&&a()}}},isFunction:function(o){return b.type(o)==="function"},isArray:Array.isArray||
function(o){return b.type(o)==="array"},isWindow:function(o){return o&&typeof o==="object"&&"setInterval"in o},isNaN:function(o){return o==null||!D.test(o)||isNaN(o)},type:function(o){return o==null?String(o):T[H.call(o)]||"object"},isPlainObject:function(o){if(!o||b.type(o)!=="object"||o.nodeType||b.isWindow(o))return false;if(o.constructor&&!Q.call(o,"constructor")&&!Q.call(o.constructor.prototype,"isPrototypeOf"))return false;for(var x in o);return x===e||Q.call(o,x)},isEmptyObject:function(o){for(var x in o)return false;
return true},error:function(o){throw o;},parseJSON:function(o){if(typeof o!=="string"||!o)return null;o=b.trim(o);if(N.test(o.replace(O,"@").replace(V,"]").replace(Z,"")))return c.JSON&&c.JSON.parse?c.JSON.parse(o):(new Function("return "+o))();b.error("Invalid JSON: "+o)},parseXML:function(o,x,C){c.DOMParser?(C=new DOMParser,x=C.parseFromString(o,"text/xml")):(x=new ActiveXObject("Microsoft.XMLDOM"),x.async="false",x.loadXML(o));C=x.documentElement;(!C||!C.nodeName||C.nodeName==="parsererror")&&
b.error("Invalid XML: "+o);return x},noop:function(){},globalEval:function(o){if(o&&m.test(o)){var x=n.getElementsByTagName("head")[0]||n.documentElement,C=n.createElement("script");C.type="text/javascript";b.support.scriptEval()?C.appendChild(n.createTextNode(o)):C.text=o;x.insertBefore(C,x.firstChild);x.removeChild(C)}},nodeName:function(o,x){return o.nodeName&&o.nodeName.toUpperCase()===x.toUpperCase()},each:function(o,x,C){var F,P=0,R=o.length,U=R===e||b.isFunction(o);if(C)if(U)for(F in o){if(x.apply(o[F],
C)===false)break}else for(;P<R;){if(x.apply(o[P++],C)===false)break}else if(U)for(F in o){if(x.call(o[F],F,o[F])===false)break}else for(C=o[0];P<R&&x.call(C,P,C)!==false;C=o[++P]);return o},trim:ha?function(o){return o==null?"":ha.call(o)}:function(o){return o==null?"":(o+"").replace(p,"").replace(s,"")},makeArray:function(o,x){var C=x||[];if(o!=null){var F=b.type(o);o.length==null||F==="string"||F==="function"||F==="regexp"||b.isWindow(o)?da.call(C,o):b.merge(C,o)}return C},inArray:function(o,x){if(x.indexOf)return x.indexOf(o);
for(var C=0,F=x.length;C<F;C++)if(x[C]===o)return C;return-1},merge:function(o,x){var C=o.length,F=0;if(typeof x.length==="number")for(var P=x.length;F<P;F++)o[C++]=x[F];else for(;x[F]!==e;)o[C++]=x[F++];o.length=C;return o},grep:function(o,x,C){var F=[],P;C=!!C;for(var R=0,U=o.length;R<U;R++){P=!!x(o[R],R);C!==P&&F.push(o[R])}return F},map:function(o,x,C){for(var F=[],P,R=0,U=o.length;R<U;R++){P=x(o[R],R,C);P!=null&&(F[F.length]=P)}return F.concat.apply([],F)},guid:1,proxy:function(o,x,C){arguments.length===
2&&(typeof x==="string"?(C=o,o=C[x],x=e):x&&!b.isFunction(x)&&(C=x,x=e));!x&&o&&(x=function(){return o.apply(C||this,arguments)});o&&(x.guid=o.guid=o.guid||x.guid||b.guid++);return x},access:function(o,x,C,F,P,R){var U=o.length;if(typeof x==="object"){for(var aa in x)b.access(o,aa,x[aa],F,P,C);return o}if(C!==e){F=!R&&F&&b.isFunction(C);for(aa=0;aa<U;aa++)P(o[aa],x,F?C.call(o[aa],aa,P(o[aa],x)):C,R);return o}return U?P(o[0],x):e},now:function(){return(new Date).getTime()},_Deferred:function(){var o=
[],x,C,F,P={done:function(){if(!F){var R=arguments,U,aa,na,ma,ka;x&&(ka=x,x=0);U=0;for(aa=R.length;U<aa;U++){na=R[U];ma=b.type(na);ma==="array"?P.done.apply(P,na):ma==="function"&&o.push(na)}ka&&P.resolveWith(ka[0],ka[1])}return this},resolveWith:function(R,U){if(!F&&!x&&!C){C=1;try{for(;o[0];)o.shift().apply(R,U)}finally{x=[R,U];C=0}}return this},resolve:function(){P.resolveWith(b.isFunction(this.promise)?this.promise():this,arguments);return this},isResolved:function(){return C||x},cancel:function(){F=
1;o=[];return this}};return P},Deferred:function(o){var x=b._Deferred(),C=b._Deferred(),F;b.extend(x,{then:function(P,R){x.done(P).fail(R);return this},fail:C.done,rejectWith:C.resolveWith,reject:C.resolve,isRejected:C.isResolved,promise:function(P,R){if(P==null){if(F)return F;F=P={}}for(R=A.length;R--;)P[A[R]]=x[A[R]];return P}});x.then(C.cancel,x.cancel);delete x.cancel;o&&o.call(x,x);return x},when:function(o){var x=arguments,C=x.length,F=C<=1&&o&&b.isFunction(o.promise)?o:b.Deferred(),P=F.promise(),
R;C>1?(R=Array(C),b.each(x,function(U,aa){b.when(aa).then(function(na){R[U]=arguments.length>1?ca.call(arguments,0):na;--C||F.resolveWith(P,R)},F.reject)})):F!==o&&F.resolve(o);return P},uaMatch:function(o){o=o.toLowerCase();o=ea.exec(o)||ga.exec(o)||j.exec(o)||o.indexOf("compatible")<0&&q.exec(o)||[];return{browser:o[1]||"",version:o[2]||"0"}},sub:function(){function o(C,F){return new o.fn.init(C,F)}b.extend(true,o,this);o.superclass=this;o.fn=o.prototype=this();o.fn.constructor=o;o.subclass=this.subclass;
o.fn.init=function C(C,F){F&&F instanceof b&&!(F instanceof o)&&(F=o(F));return b.fn.init.call(this,C,F,x)};o.fn.init.prototype=o.fn;var x=o(n);return o},browser:{}});w=b._Deferred();b.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(o,x){T["[object "+x+"]"]=x.toLowerCase()});t=b.uaMatch(t);t.browser&&(b.browser[t.browser]=true,b.browser.version=t.version);b.browser.webkit&&(b.browser.safari=true);fa&&(b.inArray=function(o,x){return fa.call(x,o)});m.test(" ")&&(p=
/^[\s\xA0]+/,s=/[\s\xA0]+$/);h=b(n);n.addEventListener?G=function(){n.removeEventListener("DOMContentLoaded",G,false);b.ready()}:n.attachEvent&&(G=function(){n.readyState==="complete"&&(n.detachEvent("onreadystatechange",G),b.ready())});return c.jQuery=c.$=b}();(function(){d.support={};var a=n.createElement("div");a.style.display="none";a.innerHTML="   <link/><table></table><a href='/a' style='color:red;float:left;opacity:.55;'>a</a><input type='checkbox'/>";var b=a.getElementsByTagName("*"),f=a.getElementsByTagName("a")[0],
g=n.createElement("select"),h=g.appendChild(n.createElement("option"));if(b&&b.length&&f){d.support={leadingWhitespace:a.firstChild.nodeType===3,tbody:!a.getElementsByTagName("tbody").length,htmlSerialize:!!a.getElementsByTagName("link").length,style:/red/.test(f.getAttribute("style")),hrefNormalized:f.getAttribute("href")==="/a",opacity:/^0.55$/.test(f.style.opacity),cssFloat:!!f.style.cssFloat,checkOn:a.getElementsByTagName("input")[0].value==="on",optSelected:h.selected,deleteExpando:true,optDisabled:false,
checkClone:false,_scriptEval:null,noCloneEvent:true,boxModel:null,inlineBlockNeedsLayout:false,shrinkWrapBlocks:false,reliableHiddenOffsets:true};g.disabled=true;d.support.optDisabled=!h.disabled;d.support.scriptEval=function(){if(d.support._scriptEval===null){var m=n.documentElement,p=n.createElement("script"),s="script"+d.now();p.type="text/javascript";try{p.appendChild(n.createTextNode("window."+s+"=1;"))}catch(D){}m.insertBefore(p,m.firstChild);c[s]?(d.support._scriptEval=true,delete c[s]):d.support._scriptEval=
false;m.removeChild(p)}return d.support._scriptEval};try{delete a.test}catch(i){d.support.deleteExpando=false}a.attachEvent&&a.fireEvent&&(a.attachEvent("onclick",function m(){d.support.noCloneEvent=false;a.detachEvent("onclick",m)}),a.cloneNode(true).fireEvent("onclick"));a=n.createElement("div");a.innerHTML="<input type='radio' name='radiotest' checked='checked'/>";b=n.createDocumentFragment();b.appendChild(a.firstChild);d.support.checkClone=b.cloneNode(true).cloneNode(true).lastChild.checked;d(function(){var m=
n.createElement("div"),p=n.getElementsByTagName("body")[0];if(p){m.style.width=m.style.paddingLeft="1px";p.appendChild(m);d.boxModel=d.support.boxModel=m.offsetWidth===2;"zoom"in m.style&&(m.style.display="inline",m.style.zoom=1,d.support.inlineBlockNeedsLayout=m.offsetWidth===2,m.style.display="",m.innerHTML="<div style='width:4px;'></div>",d.support.shrinkWrapBlocks=m.offsetWidth!==2);m.innerHTML="<table><tr><td style='padding:0;border:0;display:none'></td><td>t</td></tr></table>";var s=m.getElementsByTagName("td");
d.support.reliableHiddenOffsets=s[0].offsetHeight===0;s[0].style.display="";s[1].style.display="none";d.support.reliableHiddenOffsets=d.support.reliableHiddenOffsets&&s[0].offsetHeight===0;m.innerHTML="";p.removeChild(m).style.display="none"}});b=function(m){var p=n.createElement("div");m="on"+m;if(!p.attachEvent)return true;var s=m in p;s||(p.setAttribute(m,"return;"),s=typeof p[m]==="function");return s};d.support.submitBubbles=b("submit");d.support.changeBubbles=b("change");a=b=f=null}})();var Fa=
/^(?:\{.*\}|\[.*\])$/;d.extend({cache:{},uuid:0,expando:"jQuery"+(d.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:true,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:true},hasData:function(a){a=a.nodeType?d.cache[a[d.expando]]:a[d.expando];return!!a&&!d.isEmptyObject(a)},data:function(a,b,f,g){if(d.acceptData(a)){var h=d.expando,i=typeof b==="string",m=a.nodeType,p=m?d.cache:a,s=m?a[d.expando]:a[d.expando]&&d.expando;if(!((!s||g&&s&&!p[s][h])&&i&&f===e)){s||(m?a[d.expando]=
s=++d.uuid:s=d.expando);p[s]||(p[s]={});typeof b==="object"&&(g?p[s][h]=d.extend(p[s][h],b):p[s]=d.extend(p[s],b));a=p[s];g&&(a[h]||(a[h]={}),a=a[h]);f!==e&&(a[b]=f);if(b==="events"&&!a[b])return a[h]&&a[h].events;return i?a[b]:a}}},removeData:function(a,b,f){if(d.acceptData(a)){var g=d.expando,h=a.nodeType,i=h?d.cache:a,m=h?a[d.expando]:d.expando;if(i[m]){if(b){var p=f?i[m][g]:i[m];if(p){delete p[b];if(!d.isEmptyObject(p))return}}if(f){delete i[m][g];if(!d.isEmptyObject(i[m]))return}b=i[m][g];d.support.deleteExpando||
i!=c?delete i[m]:i[m]=null;b?(i[m]={},i[m][g]=b):h&&(d.support.deleteExpando?delete a[d.expando]:a.removeAttribute?a.removeAttribute(d.expando):a[d.expando]=null)}}},_data:function(a,b,f){return d.data(a,b,f,true)},acceptData:function(a){if(a.nodeName){var b=d.noData[a.nodeName.toLowerCase()];if(b)return b!==true&&a.getAttribute("classid")===b}return true}});d.fn.extend({data:function(a,b){var f=null;if(typeof a==="undefined"){if(this.length){f=d.data(this[0]);if(this[0].nodeType===1)for(var g=this[0].attributes,
h,i=0,m=g.length;i<m;i++){h=g[i].name;h.indexOf("data-")===0&&(h=h.substr(5),Ea(this[0],h,f[h]))}}return f}if(typeof a==="object")return this.each(function(){d.data(this,a)});var p=a.split(".");p[1]=p[1]?"."+p[1]:"";if(b===e){f=this.triggerHandler("getData"+p[1]+"!",[p[0]]);f===e&&this.length&&(f=d.data(this[0],a),f=Ea(this[0],a,f));return f===e&&p[1]?this.data(p[0]):f}return this.each(function(){var s=d(this),D=[p[0],b];s.triggerHandler("setData"+p[1]+"!",D);d.data(this,a,b);s.triggerHandler("changeData"+
p[1]+"!",D)})},removeData:function(a){return this.each(function(){d.removeData(this,a)})}});d.extend({queue:function(a,b,f){if(a){b=(b||"fx")+"queue";var g=d._data(a,b);if(!f)return g||[];!g||d.isArray(f)?g=d._data(a,b,d.makeArray(f)):g.push(f);return g}},dequeue:function(a,b){b=b||"fx";var f=d.queue(a,b),g=f.shift();g==="inprogress"&&(g=f.shift());g&&(b==="fx"&&f.unshift("inprogress"),g.call(a,function(){d.dequeue(a,b)}));f.length||d.removeData(a,b+"queue",true)}});d.fn.extend({queue:function(a,
b){typeof a!=="string"&&(b=a,a="fx");if(b===e)return d.queue(this[0],a);return this.each(function(){var f=d.queue(this,a,b);a==="fx"&&f[0]!=="inprogress"&&d.dequeue(this,a)})},dequeue:function(a){return this.each(function(){d.dequeue(this,a)})},delay:function(a,b){a=d.fx?d.fx.speeds[a]||a:a;b=b||"fx";return this.queue(b,function(){var f=this;setTimeout(function(){d.dequeue(f,b)},a)})},clearQueue:function(a){return this.queue(a||"fx",[])}});var ya=/[\n\t\r]/g,za=/\s+/,qa=/\r/g,Aa=/^(?:href|src|style)$/,
Ma=/^(?:button|input)$/i,l=/^(?:button|input|object|select|textarea)$/i,u=/^a(?:rea)?$/i,z=/^(?:radio|checkbox)$/i;d.props={"for":"htmlFor","class":"className",readonly:"readOnly",maxlength:"maxLength",cellspacing:"cellSpacing",rowspan:"rowSpan",colspan:"colSpan",tabindex:"tabIndex",usemap:"useMap",frameborder:"frameBorder"};d.fn.extend({attr:function(a,b){return d.access(this,a,b,true,d.attr)},removeAttr:function(a){return this.each(function(){d.attr(this,a,"");this.nodeType===1&&this.removeAttribute(a)})},
addClass:function(a){if(d.isFunction(a))return this.each(function(D){var I=d(this);I.addClass(a.call(this,D,I.attr("class")))});if(a&&typeof a==="string")for(var b=(a||"").split(za),f=0,g=this.length;f<g;f++){var h=this[f];if(h.nodeType===1)if(h.className){for(var i=" "+h.className+" ",m=h.className,p=0,s=b.length;p<s;p++)i.indexOf(" "+b[p]+" ")<0&&(m+=" "+b[p]);h.className=d.trim(m)}else h.className=a}return this},removeClass:function(a){if(d.isFunction(a))return this.each(function(s){var D=d(this);
D.removeClass(a.call(this,s,D.attr("class")))});if(a&&typeof a==="string"||a===e)for(var b=(a||"").split(za),f=0,g=this.length;f<g;f++){var h=this[f];if(h.nodeType===1&&h.className)if(a){for(var i=(" "+h.className+" ").replace(ya," "),m=0,p=b.length;m<p;m++)i=i.replace(" "+b[m]+" "," ");h.className=d.trim(i)}else h.className=""}return this},toggleClass:function(a,b){var f=typeof a,g=typeof b==="boolean";if(d.isFunction(a))return this.each(function(h){var i=d(this);i.toggleClass(a.call(this,h,i.attr("class"),
b),b)});return this.each(function(){if(f==="string")for(var h,i=0,m=d(this),p=b,s=a.split(za);h=s[i++];){p=g?p:!m.hasClass(h);m[p?"addClass":"removeClass"](h)}else if(f==="undefined"||f==="boolean"){this.className&&d._data(this,"__className__",this.className);this.className=this.className||a===false?"":d._data(this,"__className__")||""}})},hasClass:function(a){a=" "+a+" ";for(var b=0,f=this.length;b<f;b++)if((" "+this[b].className+" ").replace(ya," ").indexOf(a)>-1)return true;return false},val:function(a){if(!arguments.length){var b=
this[0];if(b){if(d.nodeName(b,"option")){var f=b.attributes.value;return!f||f.specified?b.value:b.text}if(d.nodeName(b,"select")){var g=b.selectedIndex;f=[];var h=b.options;b=b.type==="select-one";if(g<0)return null;var i=b?g:0;for(g=b?g+1:h.length;i<g;i++){var m=h[i];if(m.selected&&(d.support.optDisabled?!m.disabled:m.getAttribute("disabled")===null)&&(!m.parentNode.disabled||!d.nodeName(m.parentNode,"optgroup"))){a=d(m).val();if(b)return a;f.push(a)}}return f}if(z.test(b.type)&&!d.support.checkOn)return b.getAttribute("value")===
null?"on":b.value;return(b.value||"").replace(qa,"")}return e}var p=d.isFunction(a);return this.each(function(s){var D=d(this),I=a;if(this.nodeType===1){p&&(I=a.call(this,s,D.val()));I==null?I="":typeof I==="number"?I+="":d.isArray(I)&&(I=d.map(I,function(O){return O==null?"":O+""}));if(d.isArray(I)&&z.test(this.type))this.checked=d.inArray(D.val(),I)>=0;else if(d.nodeName(this,"select")){var N=d.makeArray(I);d("option",this).each(function(){this.selected=d.inArray(d(this).val(),N)>=0});N.length||
(this.selectedIndex=-1)}else this.value=I}})}});d.extend({attrFn:{val:true,css:true,html:true,text:true,data:true,width:true,height:true,offset:true},attr:function(a,b,f,g){if(!a||a.nodeType===3||a.nodeType===8||a.nodeType===2)return e;if(g&&b in d.attrFn)return d(a)[b](f);g=a.nodeType!==1||!d.isXMLDoc(a);var h=f!==e;b=g&&d.props[b]||b;if(a.nodeType===1){var i=Aa.test(b);if((b in a||a[b]!==e)&&g&&!i){h&&(b==="type"&&Ma.test(a.nodeName)&&a.parentNode&&d.error("type property can't be changed"),f===
null?a.nodeType===1&&a.removeAttribute(b):a[b]=f);if(d.nodeName(a,"form")&&a.getAttributeNode(b))return a.getAttributeNode(b).nodeValue;if(b==="tabIndex")return(b=a.getAttributeNode("tabIndex"))&&b.specified?b.value:l.test(a.nodeName)||u.test(a.nodeName)&&a.href?0:e;return a[b]}if(!d.support.style&&g&&b==="style"){h&&(a.style.cssText=""+f);return a.style.cssText}h&&a.setAttribute(b,""+f);if(!a.attributes[b]&&a.hasAttribute&&!a.hasAttribute(b))return e;a=!d.support.hrefNormalized&&g&&i?a.getAttribute(b,
2):a.getAttribute(b);return a===null?e:a}h&&(a[b]=f);return a[b]}});var B=/\.(.*)$/,K=/^(?:textarea|input|select)$/i,S=/\./g,ba=/ /g,Na=/[^\w\s.|`]/g,nb=function(a){return a.replace(Na,"\\$&")},ta="events";d.event={add:function(a,b,f,g){if(a.nodeType!==3&&a.nodeType!==8){d.isWindow(a)&&a!==c&&!a.frameElement&&(a=c);if(f===false)f=pa;else if(!f)return;var h,i;f.handler&&(h=f,f=h.handler);f.guid||(f.guid=d.guid++);if(i=d._data(a)){var m=i[ta],p=i.handle;typeof m==="function"?(p=m.handle,m=m.events):
m||(a.nodeType||(i[ta]=i=function(){}),i.events=m={});p||(i.handle=p=function(){return typeof d!=="undefined"&&!d.event.triggered?d.event.handle.apply(p.elem,arguments):e});p.elem=a;b=b.split(" ");for(var s,D=0,I;s=b[D++];){i=h?d.extend({},h):{handler:f,data:g};s.indexOf(".")>-1?(I=s.split("."),s=I.shift(),i.namespace=I.slice(0).sort().join(".")):(I=[],i.namespace="");i.type=s;i.guid||(i.guid=f.guid);var N=m[s],O=d.event.special[s]||{};if(!N){N=m[s]=[];if(!O.setup||O.setup.call(a,g,I,p)===false)a.addEventListener?
a.addEventListener(s,p,false):a.attachEvent&&a.attachEvent("on"+s,p)}O.add&&(O.add.call(a,i),i.handler.guid||(i.handler.guid=f.guid));N.push(i);d.event.global[s]=true}a=null}}},global:{},remove:function(a,b,f,g){if(a.nodeType!==3&&a.nodeType!==8){f===false&&(f=pa);var h,i,m=0,p,s,D,I,N,O,V=d.hasData(a)&&d._data(a),Z=V&&V[ta];if(V&&Z){typeof Z==="function"&&(V=Z,Z=Z.events);b&&b.type&&(f=b.handler,b=b.type);if(!b||typeof b==="string"&&b.charAt(0)==="."){b=b||"";for(h in Z)d.event.remove(a,h+b)}else{for(b=
b.split(" ");h=b[m++];){I=h;p=h.indexOf(".")<0;s=[];p||(s=h.split("."),h=s.shift(),D=RegExp("(^|\\.)"+d.map(s.slice(0).sort(),nb).join("\\.(?:.*\\.)?")+"(\\.|$)"));if(N=Z[h])if(f){I=d.event.special[h]||{};for(i=g||0;i<N.length;i++){O=N[i];if(f.guid===O.guid){if(p||D.test(O.namespace)){g==null&&N.splice(i--,1);I.remove&&I.remove.call(a,O)}if(g!=null)break}}if(N.length===0||g!=null&&N.length===1){(!I.teardown||I.teardown.call(a,s)===false)&&d.removeEvent(a,h,V.handle);delete Z[h]}}else for(i=0;i<N.length;i++){O=
N[i];if(p||D.test(O.namespace)){d.event.remove(a,I,O.handler,i);N.splice(i--,1)}}}if(d.isEmptyObject(Z)){(b=V.handle)&&(b.elem=null);delete V.events;delete V.handle;typeof V==="function"?d.removeData(a,ta,true):d.isEmptyObject(V)&&d.removeData(a,e,true)}}}}},trigger:function(a,b,f,g){var h=a.type||a;if(!g){a=typeof a==="object"?a[d.expando]?a:d.extend(d.Event(h),a):d.Event(h);h.indexOf("!")>=0&&(a.type=h=h.slice(0,-1),a.exclusive=true);f||(a.stopPropagation(),d.event.global[h]&&d.each(d.cache,function(){var N=
this[d.expando];N&&N.events&&N.events[h]&&d.event.trigger(a,b,N.handle.elem)}));if(!f||f.nodeType===3||f.nodeType===8)return e;a.result=e;a.target=f;b=d.makeArray(b);b.unshift(a)}a.currentTarget=f;(g=f.nodeType?d._data(f,"handle"):(d._data(f,ta)||{}).handle)&&g.apply(f,b);g=f.parentNode||f.ownerDocument;try{f&&f.nodeName&&d.noData[f.nodeName.toLowerCase()]||f["on"+h]&&f["on"+h].apply(f,b)===false&&(a.result=false,a.preventDefault())}catch(i){}if(!a.isPropagationStopped()&&g)d.event.trigger(a,b,g,
true);else if(!a.isDefaultPrevented()){var m;g=a.target;var p=h.replace(B,""),s=d.nodeName(g,"a")&&p==="click",D=d.event.special[p]||{};if((!D._default||D._default.call(f,a)===false)&&!s&&!(g&&g.nodeName&&d.noData[g.nodeName.toLowerCase()])){try{g[p]&&(m=g["on"+p],m&&(g["on"+p]=null),d.event.triggered=true,g[p]())}catch(I){}m&&(g["on"+p]=m);d.event.triggered=false}}},handle:function(a){var b,f,g,h;h=[];var i=d.makeArray(arguments);a=i[0]=d.event.fix(a||c.event);a.currentTarget=this;(b=a.type.indexOf(".")<
0&&!a.exclusive)||(f=a.type.split("."),a.type=f.shift(),h=f.slice(0).sort(),g=RegExp("(^|\\.)"+h.join("\\.(?:.*\\.)?")+"(\\.|$)"));a.namespace=a.namespace||h.join(".");h=d._data(this,ta);typeof h==="function"&&(h=h.events);f=(h||{})[a.type];if(h&&f){f=f.slice(0);h=0;for(var m=f.length;h<m;h++){var p=f[h];if(b||g.test(p.namespace)){a.handler=p.handler;a.data=p.data;a.handleObj=p;p=p.handler.apply(this,i);p!==e&&(a.result=p,p===false&&(a.preventDefault(),a.stopPropagation()));if(a.isImmediatePropagationStopped())break}}}return a.result},
props:"altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode layerX layerY metaKey newValue offsetX offsetY pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target toElement view wheelDelta which".split(" "),fix:function(a){if(a[d.expando])return a;var b=a;a=d.Event(b);for(var f=this.props.length,g;f;){g=this.props[--f];a[g]=b[g]}a.target||(a.target=a.srcElement||n);
a.target.nodeType===3&&(a.target=a.target.parentNode);!a.relatedTarget&&a.fromElement&&(a.relatedTarget=a.fromElement===a.target?a.toElement:a.fromElement);if(a.pageX==null&&a.clientX!=null){b=n.documentElement;f=n.body;a.pageX=a.clientX+(b&&b.scrollLeft||f&&f.scrollLeft||0)-(b&&b.clientLeft||f&&f.clientLeft||0);a.pageY=a.clientY+(b&&b.scrollTop||f&&f.scrollTop||0)-(b&&b.clientTop||f&&f.clientTop||0)}a.which==null&&(a.charCode!=null||a.keyCode!=null)&&(a.which=a.charCode!=null?a.charCode:a.keyCode);
!a.metaKey&&a.ctrlKey&&(a.metaKey=a.ctrlKey);!a.which&&a.button!==e&&(a.which=a.button&1?1:a.button&2?3:a.button&4?2:0);return a},guid:1E8,proxy:d.proxy,special:{ready:{setup:d.bindReady,teardown:d.noop},live:{add:function(a){d.event.add(this,ja(a.origType,a.selector),d.extend({},a,{handler:ra,guid:a.handler.guid}))},remove:function(a){d.event.remove(this,ja(a.origType,a.selector),a)}},beforeunload:{setup:function(a,b,f){d.isWindow(this)&&(this.onbeforeunload=f)},teardown:function(a,b){this.onbeforeunload===
b&&(this.onbeforeunload=null)}}}};d.removeEvent=n.removeEventListener?function(a,b,f){a.removeEventListener&&a.removeEventListener(b,f,false)}:function(a,b,f){a.detachEvent&&a.detachEvent("on"+b,f)};d.Event=function(a){if(!this.preventDefault)return new d.Event(a);a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||a.returnValue===false||a.getPreventDefault&&a.getPreventDefault()?oa:pa):this.type=a;this.timeStamp=d.now();this[d.expando]=true};d.Event.prototype=
{preventDefault:function(){this.isDefaultPrevented=oa;var a=this.originalEvent;a&&(a.preventDefault?a.preventDefault():a.returnValue=false)},stopPropagation:function(){this.isPropagationStopped=oa;var a=this.originalEvent;a&&(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=true)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=oa;this.stopPropagation()},isDefaultPrevented:pa,isPropagationStopped:pa,isImmediatePropagationStopped:pa};var Ta=function(a){var b=a.relatedTarget;
try{for(;b&&b!==this;)b=b.parentNode;b!==this&&(a.type=a.data,d.event.handle.apply(this,arguments))}catch(f){}},Ua=function(a){a.type=a.data;d.event.handle.apply(this,arguments)};d.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){d.event.special[a]={setup:function(f){d.event.add(this,b,f&&f.selector?Ua:Ta,a)},teardown:function(f){d.event.remove(this,b,f&&f.selector?Ua:Ta)}}});d.support.submitBubbles||(d.event.special.submit={setup:function(){if(this.nodeName&&this.nodeName.toLowerCase()!==
"form"){d.event.add(this,"click.specialSubmit",function(a){var b=a.target,f=b.type;if((f==="submit"||f==="image")&&d(b).closest("form").length){a.liveFired=e;return va("submit",this,arguments)}});d.event.add(this,"keypress.specialSubmit",function(a){var b=a.target,f=b.type;if((f==="text"||f==="password")&&d(b).closest("form").length&&a.keyCode===13){a.liveFired=e;return va("submit",this,arguments)}})}else return false},teardown:function(){d.event.remove(this,".specialSubmit")}});if(!d.support.changeBubbles){var Ba,
Va=function(a){var b=a.type,f=a.value;b==="radio"||b==="checkbox"?f=a.checked:b==="select-multiple"?f=a.selectedIndex>-1?d.map(a.options,function(g){return g.selected}).join("-"):"":a.nodeName.toLowerCase()==="select"&&(f=a.selectedIndex);return f},Ga=function(a,b){var f=a.target,g,h;if(K.test(f.nodeName)&&!f.readOnly){g=d._data(f,"_change_data");h=Va(f);(a.type!=="focusout"||f.type!=="radio")&&d._data(f,"_change_data",h);if(!(g===e||h===g))if(g!=null||h){a.type="change";a.liveFired=e;return d.event.trigger(a,
b,f)}}};d.event.special.change={filters:{focusout:Ga,beforedeactivate:Ga,click:function(a){var b=a.target,f=b.type;if(f==="radio"||f==="checkbox"||b.nodeName.toLowerCase()==="select")return Ga.call(this,a)},keydown:function(a){var b=a.target,f=b.type;if(a.keyCode===13&&b.nodeName.toLowerCase()!=="textarea"||a.keyCode===32&&(f==="checkbox"||f==="radio")||f==="select-multiple")return Ga.call(this,a)},beforeactivate:function(a){a=a.target;d._data(a,"_change_data",Va(a))}},setup:function(){if(this.type===
"file")return false;for(var a in Ba)d.event.add(this,a+".specialChange",Ba[a]);return K.test(this.nodeName)},teardown:function(){d.event.remove(this,".specialChange");return K.test(this.nodeName)}};Ba=d.event.special.change.filters;Ba.focus=Ba.beforeactivate}n.addEventListener&&d.each({focus:"focusin",blur:"focusout"},function(a,b){function f(g){g=d.event.fix(g);g.type=b;return d.event.handle.call(this,g)}d.event.special[b]={setup:function(){this.addEventListener(a,f,true)},teardown:function(){this.removeEventListener(a,
f,true)}}});d.each(["bind","one"],function(a,b){d.fn[b]=function(f,g,h){if(typeof f==="object"){for(var i in f)this[b](i,g,f[i],h);return this}if(d.isFunction(g)||g===false){h=g;g=e}var m=b==="one"?d.proxy(h,function(s){d(this).unbind(s,m);return h.apply(this,arguments)}):h;if(f==="unload"&&b!=="one")this.one(f,g,h);else{i=0;for(var p=this.length;i<p;i++)d.event.add(this[i],f,m,g)}return this}});d.fn.extend({unbind:function(a,b){if(typeof a!=="object"||a.preventDefault)for(var f=0,g=this.length;f<
g;f++)d.event.remove(this[f],a,b);else for(f in a)this.unbind(f,a[f]);return this},delegate:function(a,b,f,g){return this.live(b,f,g,a)},undelegate:function(a,b,f){return arguments.length===0?this.unbind("live"):this.die(b,null,f,a)},trigger:function(a,b){return this.each(function(){d.event.trigger(a,b,this)})},triggerHandler:function(a,b){if(this[0]){var f=d.Event(a);f.preventDefault();f.stopPropagation();d.event.trigger(f,b,this[0]);return f.result}},toggle:function(a){for(var b=arguments,f=1;f<
b.length;)d.proxy(a,b[f++]);return this.click(d.proxy(a,function(g){var h=(d._data(this,"lastToggle"+a.guid)||0)%f;d._data(this,"lastToggle"+a.guid,h+1);g.preventDefault();return b[h].apply(this,arguments)||false}))},hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}});var Wa={focus:"focusin",blur:"focusout",mouseenter:"mouseover",mouseleave:"mouseout"};d.each(["live","die"],function(a,b){d.fn[b]=function(f,g,h,i){var m,p=0,s,D,I=i||this.selector;i=i?this:d(this.context);if(typeof f===
"object"&&!f.preventDefault){for(m in f)i[b](m,g,f[m],I);return this}d.isFunction(g)&&(h=g,g=e);for(f=(f||"").split(" ");(m=f[p++])!=null;){s=B.exec(m);D="";s&&(D=s[0],m=m.replace(B,""));if(m==="hover")f.push("mouseenter"+D,"mouseleave"+D);else{s=m;m==="focus"||m==="blur"?(f.push(Wa[m]+D),m+=D):m=(Wa[m]||m)+D;if(b==="live"){D=0;for(var N=i.length;D<N;D++)d.event.add(i[D],"live."+ja(m,I),{data:g,selector:I,handler:h,origType:m,origHandler:h,preType:s})}else i.unbind("live."+ja(m,I),h)}}return this}});
d.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error".split(" "),function(a,b){d.fn[b]=function(f,g){g==null&&(g=f,f=null);return arguments.length>0?this.bind(b,f,g):this.trigger(b)};d.attrFn&&(d.attrFn[b]=true)});(function(){function a(j,q,t,y,w,A){w=0;for(var G=y.length;w<G;w++){var H=y[w];if(H){var Q=false;for(H=H[j];H;){if(H.sizcache===t){Q=y[H.sizset];
break}if(H.nodeType===1){A||(H.sizcache=t,H.sizset=w);if(typeof q!=="string"){if(H===q){Q=true;break}}else if(p.filter(q,[H]).length>0){Q=H;break}}H=H[j]}y[w]=Q}}}function b(j,q,t,y,w,A){w=0;for(var G=y.length;w<G;w++){var H=y[w];if(H){var Q=false;for(H=H[j];H;){if(H.sizcache===t){Q=y[H.sizset];break}H.nodeType===1&&!A&&(H.sizcache=t,H.sizset=w);if(H.nodeName.toLowerCase()===q){Q=H;break}H=H[j]}y[w]=Q}}}var f=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,
g=0,h=Object.prototype.toString,i=false,m=true;[0,0].sort(function(){m=false;return 0});var p=function(j,q,t,y){t=t||[];var w=q=q||n;if(q.nodeType!==1&&q.nodeType!==9)return[];if(!j||typeof j!=="string")return t;var A,G,H,Q,da,ca,ha=true,fa=p.isXML(q),T=[],o=j;do{f.exec("");if(A=f.exec(o)){o=A[3];T.push(A[1]);if(A[2]){Q=A[3];break}}}while(A);if(T.length>1&&D.exec(j))if(T.length===2&&s.relative[T[0]])G=ga(T[0]+T[1],q);else for(G=s.relative[T[0]]?[q]:p(T.shift(),q);T.length;){j=T.shift();s.relative[j]&&
(j+=T.shift());G=ga(j,G)}else{!y&&T.length>1&&q.nodeType===9&&!fa&&s.match.ID.test(T[0])&&!s.match.ID.test(T[T.length-1])&&(da=p.find(T.shift(),q,fa),q=da.expr?p.filter(da.expr,da.set)[0]:da.set[0]);if(q){da=y?{expr:T.pop(),set:O(y)}:p.find(T.pop(),T.length===1&&(T[0]==="~"||T[0]==="+")&&q.parentNode?q.parentNode:q,fa);G=da.expr?p.filter(da.expr,da.set):da.set;for(T.length>0?H=O(G):ha=false;T.length;){A=ca=T.pop();s.relative[ca]?A=T.pop():ca="";A==null&&(A=q);s.relative[ca](H,A,fa)}}else H=[]}H||
(H=G);H||p.error(ca||j);if(h.call(H)==="[object Array]")if(ha)if(q&&q.nodeType===1)for(j=0;H[j]!=null;j++)H[j]&&(H[j]===true||H[j].nodeType===1&&p.contains(q,H[j]))&&t.push(G[j]);else for(j=0;H[j]!=null;j++)H[j]&&H[j].nodeType===1&&t.push(G[j]);else t.push.apply(t,H);else O(H,t);Q&&(p(Q,w,t,y),p.uniqueSort(t));return t};p.uniqueSort=function(j){if(Z){i=m;j.sort(Z);if(i)for(var q=1;q<j.length;q++)j[q]===j[q-1]&&j.splice(q--,1)}return j};p.matches=function(j,q){return p(j,null,null,q)};p.matchesSelector=
function(j,q){return p(q,null,null,[j]).length>0};p.find=function(j,q,t){var y;if(!j)return[];for(var w=0,A=s.order.length;w<A;w++){var G,H=s.order[w];if(G=s.leftMatch[H].exec(j)){var Q=G[1];G.splice(1,1);if(Q.substr(Q.length-1)!=="\\"){G[1]=(G[1]||"").replace(/\\/g,"");y=s.find[H](G,q,t);if(y!=null){j=j.replace(s.match[H],"");break}}}}y||(y=typeof q.getElementsByTagName!=="undefined"?q.getElementsByTagName("*"):[]);return{set:y,expr:j}};p.filter=function(j,q,t,y){for(var w,A,G=j,H=[],Q=q,da=q&&q[0]&&
p.isXML(q[0]);j&&q.length;){for(var ca in s.filter)if((w=s.leftMatch[ca].exec(j))!=null&&w[2]){var ha,fa,T=s.filter[ca];fa=w[1];A=false;w.splice(1,1);if(fa.substr(fa.length-1)!=="\\"){Q===H&&(H=[]);if(s.preFilter[ca])if(w=s.preFilter[ca](w,Q,t,H,y,da)){if(w===true)continue}else A=ha=true;if(w)for(var o=0;(fa=Q[o])!=null;o++)if(fa){ha=T(fa,w,o,Q);var x=y^!!ha;t&&ha!=null?x?A=true:Q[o]=false:x&&(H.push(fa),A=true)}if(ha!==e){t||(Q=H);j=j.replace(s.match[ca],"");if(!A)return[];break}}}if(j===G)if(A==
null)p.error(j);else break;G=j}return Q};p.error=function(j){throw"Syntax error, unrecognized expression: "+j;};var s=p.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,
POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(j){return j.getAttribute("href")}},relative:{"+":function(j,q){var t=typeof q==="string",y=t&&!/\W/.test(q);t=t&&!y;y&&(q=q.toLowerCase());y=0;for(var w=j.length,A;y<w;y++)if(A=j[y]){for(;(A=A.previousSibling)&&A.nodeType!==1;);j[y]=t||A&&A.nodeName.toLowerCase()===
q?A||false:A===q}t&&p.filter(q,j,true)},">":function(j,q){var t,y=typeof q==="string",w=0,A=j.length;if(y&&!/\W/.test(q))for(q=q.toLowerCase();w<A;w++){if(t=j[w]){t=t.parentNode;j[w]=t.nodeName.toLowerCase()===q?t:false}}else{for(;w<A;w++)(t=j[w])&&(j[w]=y?t.parentNode:t.parentNode===q);y&&p.filter(q,j,true)}},"":function(j,q,t){var y,w=g++,A=a;typeof q==="string"&&!/\W/.test(q)&&(q=q.toLowerCase(),y=q,A=b);A("parentNode",q,w,j,y,t)},"~":function(j,q,t){var y,w=g++,A=a;typeof q==="string"&&!/\W/.test(q)&&
(q=q.toLowerCase(),y=q,A=b);A("previousSibling",q,w,j,y,t)}},find:{ID:function(j,q,t){if(typeof q.getElementById!=="undefined"&&!t)return(j=q.getElementById(j[1]))&&j.parentNode?[j]:[]},NAME:function(j,q){if(typeof q.getElementsByName!=="undefined"){for(var t=[],y=q.getElementsByName(j[1]),w=0,A=y.length;w<A;w++)y[w].getAttribute("name")===j[1]&&t.push(y[w]);return t.length===0?null:t}},TAG:function(j,q){if(typeof q.getElementsByTagName!=="undefined")return q.getElementsByTagName(j[1])}},preFilter:{CLASS:function(j,
q,t,y,w,A){j=" "+j[1].replace(/\\/g,"")+" ";if(A)return j;A=0;for(var G;(G=q[A])!=null;A++)G&&(w^(G.className&&(" "+G.className+" ").replace(/[\t\n\r]/g," ").indexOf(j)>=0)?t||y.push(G):t&&(q[A]=false));return false},ID:function(j){return j[1].replace(/\\/g,"")},TAG:function(j){return j[1].toLowerCase()},CHILD:function(j){if(j[1]==="nth"){j[2]||p.error(j[0]);j[2]=j[2].replace(/^\+|\s*/g,"");var q=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec(j[2]==="even"&&"2n"||j[2]==="odd"&&"2n+1"||!/\D/.test(j[2])&&"0n+"+
j[2]||j[2]);j[2]=q[1]+(q[2]||1)-0;j[3]=q[3]-0}else j[2]&&p.error(j[0]);j[0]=g++;return j},ATTR:function(j,q,t,y,w,A){q=j[1]=j[1].replace(/\\/g,"");!A&&s.attrMap[q]&&(j[1]=s.attrMap[q]);j[4]=(j[4]||j[5]||"").replace(/\\/g,"");j[2]==="~="&&(j[4]=" "+j[4]+" ");return j},PSEUDO:function(j,q,t,y,w){if(j[1]==="not")if((f.exec(j[3])||"").length>1||/^\w/.test(j[3]))j[3]=p(j[3],null,null,q);else{j=p.filter(j[3],q,t,true^w);t||y.push.apply(y,j);return false}else if(s.match.POS.test(j[0])||s.match.CHILD.test(j[0]))return true;
return j},POS:function(j){j.unshift(true);return j}},filters:{enabled:function(j){return j.disabled===false&&j.type!=="hidden"},disabled:function(j){return j.disabled===true},checked:function(j){return j.checked===true},selected:function(j){return j.selected===true},parent:function(j){return!!j.firstChild},empty:function(j){return!j.firstChild},has:function(j,q,t){return!!p(t[3],j).length},header:function(j){return/h\d/i.test(j.nodeName)},text:function(j){return"text"===j.type},radio:function(j){return"radio"===
j.type},checkbox:function(j){return"checkbox"===j.type},file:function(j){return"file"===j.type},password:function(j){return"password"===j.type},submit:function(j){return"submit"===j.type},image:function(j){return"image"===j.type},reset:function(j){return"reset"===j.type},button:function(j){return"button"===j.type||j.nodeName.toLowerCase()==="button"},input:function(j){return/input|select|textarea|button/i.test(j.nodeName)}},setFilters:{first:function(j,q){return q===0},last:function(j,q,t,y){return q===
y.length-1},even:function(j,q){return q%2===0},odd:function(j,q){return q%2===1},lt:function(j,q,t){return q<t[3]-0},gt:function(j,q,t){return q>t[3]-0},nth:function(j,q,t){return t[3]-0===q},eq:function(j,q,t){return t[3]-0===q}},filter:{PSEUDO:function(j,q,t,y){var w=q[1],A=s.filters[w];if(A)return A(j,t,q,y);if(w==="contains")return(j.textContent||j.innerText||p.getText([j])||"").indexOf(q[3])>=0;if(w==="not"){q=q[3];t=0;for(y=q.length;t<y;t++)if(q[t]===j)return false;return true}p.error(w)},CHILD:function(j,
q){var t=q[1],y=j;switch(t){case "only":case "first":for(;y=y.previousSibling;)if(y.nodeType===1)return false;if(t==="first")return true;y=j;case "last":for(;y=y.nextSibling;)if(y.nodeType===1)return false;return true;case "nth":t=q[2];var w=q[3];if(t===1&&w===0)return true;var A=q[0],G=j.parentNode;if(G&&(G.sizcache!==A||!j.nodeIndex)){var H=0;for(y=G.firstChild;y;y=y.nextSibling)y.nodeType===1&&(y.nodeIndex=++H);G.sizcache=A}y=j.nodeIndex-w;return t===0?y===0:y%t===0&&y/t>=0}},ID:function(j,q){return j.nodeType===
1&&j.getAttribute("id")===q},TAG:function(j,q){return q==="*"&&j.nodeType===1||j.nodeName.toLowerCase()===q},CLASS:function(j,q){return(" "+(j.className||j.getAttribute("class"))+" ").indexOf(q)>-1},ATTR:function(j,q){var t=q[1];t=s.attrHandle[t]?s.attrHandle[t](j):j[t]!=null?j[t]:j.getAttribute(t);var y=t+"",w=q[2],A=q[4];return t==null?w==="!=":w==="="?y===A:w==="*="?y.indexOf(A)>=0:w==="~="?(" "+y+" ").indexOf(A)>=0:A?w==="!="?y!==A:w==="^="?y.indexOf(A)===0:w==="$="?y.substr(y.length-A.length)===
A:w==="|="?y===A||y.substr(0,A.length+1)===A+"-":false:y&&t!==false},POS:function(j,q,t,y){var w=s.setFilters[q[2]];if(w)return w(j,t,q,y)}}},D=s.match.POS,I=function(j,q){return"\\"+(q-0+1)},N;for(N in s.match){s.match[N]=RegExp(s.match[N].source+/(?![^\[]*\])(?![^\(]*\))/.source);s.leftMatch[N]=RegExp(/(^(?:.|\r|\n)*?)/.source+s.match[N].source.replace(/\\(\d+)/g,I))}var O=function(j,q){j=Array.prototype.slice.call(j,0);if(q){q.push.apply(q,j);return q}return j};try{Array.prototype.slice.call(n.documentElement.childNodes,
0)}catch(V){O=function(j,q){var t=0,y=q||[];if(h.call(j)==="[object Array]")Array.prototype.push.apply(y,j);else if(typeof j.length==="number")for(var w=j.length;t<w;t++)y.push(j[t]);else for(;j[t];t++)y.push(j[t]);return y}}var Z,ea;n.documentElement.compareDocumentPosition?Z=function(j,q){if(j===q){i=true;return 0}if(!j.compareDocumentPosition||!q.compareDocumentPosition)return j.compareDocumentPosition?-1:1;return j.compareDocumentPosition(q)&4?-1:1}:(Z=function(j,q){var t,y,w=[],A=[];t=j.parentNode;
y=q.parentNode;var G=t;if(j===q){i=true;return 0}if(t===y)return ea(j,q);if(!t)return-1;if(!y)return 1;for(;G;){w.unshift(G);G=G.parentNode}for(G=y;G;){A.unshift(G);G=G.parentNode}t=w.length;y=A.length;for(G=0;G<t&&G<y;G++)if(w[G]!==A[G])return ea(w[G],A[G]);return G===t?ea(j,A[G],-1):ea(w[G],q,1)},ea=function(j,q,t){if(j===q)return t;for(j=j.nextSibling;j;){if(j===q)return-1;j=j.nextSibling}return 1});p.getText=function(j){for(var q="",t,y=0;j[y];y++){t=j[y];t.nodeType===3||t.nodeType===4?q+=t.nodeValue:
t.nodeType!==8&&(q+=p.getText(t.childNodes))}return q};(function(){var j=n.createElement("div"),q="script"+(new Date).getTime(),t=n.documentElement;j.innerHTML="<a name='"+q+"'/>";t.insertBefore(j,t.firstChild);n.getElementById(q)&&(s.find.ID=function(y,w,A){if(typeof w.getElementById!=="undefined"&&!A)return(w=w.getElementById(y[1]))?w.id===y[1]||typeof w.getAttributeNode!=="undefined"&&w.getAttributeNode("id").nodeValue===y[1]?[w]:e:[]},s.filter.ID=function(y,w){var A=typeof y.getAttributeNode!==
"undefined"&&y.getAttributeNode("id");return y.nodeType===1&&A&&A.nodeValue===w});t.removeChild(j);t=j=null})();(function(){var j=n.createElement("div");j.appendChild(n.createComment(""));j.getElementsByTagName("*").length>0&&(s.find.TAG=function(q,t){var y=t.getElementsByTagName(q[1]);if(q[1]==="*"){for(var w=[],A=0;y[A];A++)y[A].nodeType===1&&w.push(y[A]);y=w}return y});j.innerHTML="<a href='#'></a>";j.firstChild&&typeof j.firstChild.getAttribute!=="undefined"&&j.firstChild.getAttribute("href")!==
"#"&&(s.attrHandle.href=function(q){return q.getAttribute("href",2)});j=null})();n.querySelectorAll&&function(){var j=p,q=n.createElement("div");q.innerHTML="<p class='TEST'></p>";if(!q.querySelectorAll||q.querySelectorAll(".TEST").length!==0){p=function(y,w,A,G){w=w||n;if(!G&&!p.isXML(w)){var H=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(y);if(H&&(w.nodeType===1||w.nodeType===9)){if(H[1])return O(w.getElementsByTagName(y),A);if(H[2]&&s.find.CLASS&&w.getElementsByClassName)return O(w.getElementsByClassName(H[2]),
A)}if(w.nodeType===9){if(y==="body"&&w.body)return O([w.body],A);if(H&&H[3]){var Q=w.getElementById(H[3]);if(!Q||!Q.parentNode)return O([],A);if(Q.id===H[3])return O([Q],A)}try{return O(w.querySelectorAll(y),A)}catch(da){}}else if(w.nodeType===1&&w.nodeName.toLowerCase()!=="object"){Q=(H=w.getAttribute("id"))||"__sizzle__";var ca=w.parentNode,ha=/^\s*[+~]/.test(y);H?Q=Q.replace(/'/g,"\\$&"):w.setAttribute("id",Q);ha&&ca&&(w=w.parentNode);try{if(!ha||ca)return O(w.querySelectorAll("[id='"+Q+"'] "+
y),A)}catch(fa){}finally{H||w.removeAttribute("id")}}}return j(y,w,A,G)};for(var t in j)p[t]=j[t];q=null}}();(function(){var j=n.documentElement,q=j.matchesSelector||j.mozMatchesSelector||j.webkitMatchesSelector||j.msMatchesSelector,t=false;try{q.call(n.documentElement,"[test!='']:sizzle")}catch(y){t=true}q&&(p.matchesSelector=function(w,A){A=A.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!p.isXML(w))try{if(t||!s.match.PSEUDO.test(A)&&!/!=/.test(A))return q.call(w,A)}catch(G){}return p(A,null,null,
[w]).length>0})})();(function(){var j=n.createElement("div");j.innerHTML="<div class='test e'></div><div class='test'></div>";if(j.getElementsByClassName&&j.getElementsByClassName("e").length!==0){j.lastChild.className="e";if(j.getElementsByClassName("e").length!==1){s.order.splice(1,0,"CLASS");s.find.CLASS=function(q,t,y){if(typeof t.getElementsByClassName!=="undefined"&&!y)return t.getElementsByClassName(q[1])};j=null}}})();n.documentElement.contains?p.contains=function(j,q){return j!==q&&(j.contains?
j.contains(q):true)}:n.documentElement.compareDocumentPosition?p.contains=function(j,q){return!!(j.compareDocumentPosition(q)&16)}:p.contains=function(){return false};p.isXML=function(j){return(j=(j?j.ownerDocument||j:0).documentElement)?j.nodeName!=="HTML":false};var ga=function(j,q){for(var t,y=[],w="",A=q.nodeType?[q]:q;t=s.match.PSEUDO.exec(j);){w+=t[0];j=j.replace(s.match.PSEUDO,"")}j=s.relative[j]?j+"*":j;t=0;for(var G=A.length;t<G;t++)p(j,A[t],y);return p.filter(w,y)};d.find=p;d.expr=p.selectors;
d.expr[":"]=d.expr.filters;d.unique=p.uniqueSort;d.text=p.getText;d.isXMLDoc=p.isXML;d.contains=p.contains})();var ob=/Until$/,pb=/^(?:parents|prevUntil|prevAll)/,qb=/,/,mb=/^.[^:#\[\.,]*$/,rb=Array.prototype.slice,sb=d.expr.match.POS,tb={children:true,contents:true,next:true,prev:true};d.fn.extend({find:function(a){for(var b=this.pushStack("","find",a),f=0,g=0,h=this.length;g<h;g++){f=b.length;d.find(a,this[g],b);if(g>0)for(var i=f;i<b.length;i++)for(var m=0;m<f;m++)if(b[m]===b[i]){b.splice(i--,
1);break}}return b},has:function(a){var b=d(a);return this.filter(function(){for(var f=0,g=b.length;f<g;f++)if(d.contains(this,b[f]))return true})},not:function(a){return this.pushStack(ia(this,a,false),"not",a)},filter:function(a){return this.pushStack(ia(this,a,true),"filter",a)},is:function(a){return!!a&&d.filter(a,this).length>0},closest:function(a,b){var f=[],g,h,i=this[0];if(d.isArray(a)){var m,p={},s=1;if(i&&a.length){g=0;for(h=a.length;g<h;g++){m=a[g];p[m]||(p[m]=d.expr.match.POS.test(m)?
d(m,b||this.context):m)}for(;i&&i.ownerDocument&&i!==b;){for(m in p){g=p[m];(g.jquery?g.index(i)>-1:d(i).is(g))&&f.push({selector:m,elem:i,level:s})}i=i.parentNode;s++}}return f}m=sb.test(a)?d(a,b||this.context):null;g=0;for(h=this.length;g<h;g++)for(i=this[g];i;){if(m?m.index(i)>-1:d.find.matchesSelector(i,a)){f.push(i);break}i=i.parentNode;if(!i||!i.ownerDocument||i===b)break}f=f.length>1?d.unique(f):f;return this.pushStack(f,"closest",a)},index:function(a){if(!a||typeof a==="string")return d.inArray(this[0],
a?d(a):this.parent().children());return d.inArray(a.jquery?a[0]:a,this)},add:function(a,b){var f=typeof a==="string"?d(a,b):d.makeArray(a),g=d.merge(this.get(),f);return this.pushStack(!f[0]||!f[0].parentNode||f[0].parentNode.nodeType===11||!g[0]||!g[0].parentNode||g[0].parentNode.nodeType===11?g:d.unique(g))},andSelf:function(){return this.add(this.prevObject)}});d.each({parent:function(a){return(a=a.parentNode)&&a.nodeType!==11?a:null},parents:function(a){return d.dir(a,"parentNode")},parentsUntil:function(a,
b,f){return d.dir(a,"parentNode",f)},next:function(a){return d.nth(a,2,"nextSibling")},prev:function(a){return d.nth(a,2,"previousSibling")},nextAll:function(a){return d.dir(a,"nextSibling")},prevAll:function(a){return d.dir(a,"previousSibling")},nextUntil:function(a,b,f){return d.dir(a,"nextSibling",f)},prevUntil:function(a,b,f){return d.dir(a,"previousSibling",f)},siblings:function(a){return d.sibling(a.parentNode.firstChild,a)},children:function(a){return d.sibling(a.firstChild)},contents:function(a){return d.nodeName(a,
"iframe")?a.contentDocument||a.contentWindow.document:d.makeArray(a.childNodes)}},function(a,b){d.fn[a]=function(f,g){var h=d.map(this,b,f),i=rb.call(arguments);ob.test(a)||(g=f);g&&typeof g==="string"&&(h=d.filter(g,h));h=this.length>1&&!tb[a]?d.unique(h):h;(this.length>1||qb.test(g))&&pb.test(a)&&(h=h.reverse());return this.pushStack(h,a,i.join(","))}});d.extend({filter:function(a,b,f){f&&(a=":not("+a+")");return b.length===1?d.find.matchesSelector(b[0],a)?[b[0]]:[]:d.find.matches(a,b)},dir:function(a,
b,f){var g=[];for(a=a[b];a&&a.nodeType!==9&&(f===e||a.nodeType!==1||!d(a).is(f));){a.nodeType===1&&g.push(a);a=a[b]}return g},nth:function(a,b,f){b=b||1;for(var g=0;a;a=a[f])if(a.nodeType===1&&++g===b)break;return a},sibling:function(a,b){for(var f=[];a;a=a.nextSibling)a.nodeType===1&&a!==b&&f.push(a);return f}});var ub=/ jQuery\d+="(?:\d+|null)"/g,Oa=/^\s+/,Xa=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,Ya=/<([\w:]+)/,vb=/<tbody/i,wb=/<|&#?\w+;/,Za=/<(?:script|object|embed|option|style)/i,
$a=/checked\s*(?:[^=]|=\s*.checked.)/i,la={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]};la.optgroup=la.option;la.tbody=la.tfoot=la.colgroup=la.caption=la.thead;la.th=la.td;d.support.htmlSerialize||(la._default=[1,"div<div>",
"</div>"]);d.fn.extend({text:function(a){if(d.isFunction(a))return this.each(function(b){var f=d(this);f.text(a.call(this,b,f.text()))});if(typeof a!=="object"&&a!==e)return this.empty().append((this[0]&&this[0].ownerDocument||n).createTextNode(a));return d.text(this)},wrapAll:function(a){if(d.isFunction(a))return this.each(function(f){d(this).wrapAll(a.call(this,f))});if(this[0]){var b=d(a,this[0].ownerDocument).eq(0).clone(true);this[0].parentNode&&b.insertBefore(this[0]);b.map(function(){for(var f=
this;f.firstChild&&f.firstChild.nodeType===1;)f=f.firstChild;return f}).append(this)}return this},wrapInner:function(a){if(d.isFunction(a))return this.each(function(b){d(this).wrapInner(a.call(this,b))});return this.each(function(){var b=d(this),f=b.contents();f.length?f.wrapAll(a):b.append(a)})},wrap:function(a){return this.each(function(){d(this).wrapAll(a)})},unwrap:function(){return this.parent().each(function(){d.nodeName(this,"body")||d(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,
true,function(a){this.nodeType===1&&this.appendChild(a)})},prepend:function(){return this.domManip(arguments,true,function(a){this.nodeType===1&&this.insertBefore(a,this.firstChild)})},before:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,false,function(b){this.parentNode.insertBefore(b,this)});if(arguments.length){var a=d(arguments[0]);a.push.apply(a,this.toArray());return this.pushStack(a,"before",arguments)}},after:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,
false,function(b){this.parentNode.insertBefore(b,this.nextSibling)});if(arguments.length){var a=this.pushStack(this,"after",arguments);a.push.apply(a,d(arguments[0]).toArray());return a}},remove:function(a,b){for(var f=0,g;(g=this[f])!=null;f++)if(!a||d.filter(a,[g]).length){!b&&g.nodeType===1&&(d.cleanData(g.getElementsByTagName("*")),d.cleanData([g]));g.parentNode&&g.parentNode.removeChild(g)}return this},empty:function(){for(var a=0,b;(b=this[a])!=null;a++)for(b.nodeType===1&&d.cleanData(b.getElementsByTagName("*"));b.firstChild;)b.removeChild(b.firstChild);
return this},clone:function(a,b){a=a==null?true:a;b=b==null?a:b;return this.map(function(){return d.clone(this,a,b)})},html:function(a){if(a===e)return this[0]&&this[0].nodeType===1?this[0].innerHTML.replace(ub,""):null;if(typeof a!=="string"||Za.test(a)||!d.support.leadingWhitespace&&Oa.test(a)||la[(Ya.exec(a)||["",""])[1].toLowerCase()])d.isFunction(a)?this.each(function(h){var i=d(this);i.html(a.call(this,h,i.html()))}):this.empty().append(a);else{a=a.replace(Xa,"<$1></$2>");try{for(var b=0,f=
this.length;b<f;b++)this[b].nodeType===1&&(d.cleanData(this[b].getElementsByTagName("*")),this[b].innerHTML=a)}catch(g){this.empty().append(a)}}return this},replaceWith:function(a){if(this[0]&&this[0].parentNode){if(d.isFunction(a))return this.each(function(b){var f=d(this),g=f.html();f.replaceWith(a.call(this,b,g))});typeof a!=="string"&&(a=d(a).detach());return this.each(function(){var b=this.nextSibling,f=this.parentNode;d(this).remove();b?d(b).before(a):d(f).append(a)})}return this.pushStack(d(d.isFunction(a)?
a():a),"replaceWith",a)},detach:function(a){return this.remove(a,true)},domManip:function(a,b,f){var g,h,i,m=a[0],p=[];if(!d.support.checkClone&&arguments.length===3&&typeof m==="string"&&$a.test(m))return this.each(function(){d(this).domManip(a,b,f,true)});if(d.isFunction(m))return this.each(function(I){var N=d(this);a[0]=m.call(this,I,b?N.html():e);N.domManip(a,b,f)});if(this[0]){i=m&&m.parentNode;d.support.parentNode&&i&&i.nodeType===11&&i.childNodes.length===this.length?g={fragment:i}:g=d.buildFragment(a,
this,p);i=g.fragment;i.childNodes.length===1?h=i=i.firstChild:h=i.firstChild;if(h){b=b&&d.nodeName(h,"tr");h=0;for(var s=this.length,D=s-1;h<s;h++)f.call(b?d.nodeName(this[h],"table")?this[h].getElementsByTagName("tbody")[0]||this[h].appendChild(this[h].ownerDocument.createElement("tbody")):this[h]:this[h],g.cacheable||s>1&&h<D?d.clone(i,true,true):i)}p.length&&d.each(p,X)}return this}});d.buildFragment=function(a,b,f){var g,h,i;b=b&&b[0]?b[0].ownerDocument||b[0]:n;a.length===1&&typeof a[0]==="string"&&
a[0].length<512&&b===n&&a[0].charAt(0)==="<"&&!Za.test(a[0])&&(d.support.checkClone||!$a.test(a[0]))&&(h=true,i=d.fragments[a[0]],i&&i!==1&&(g=i));g||(g=b.createDocumentFragment(),d.clean(a,b,g,f));h&&(d.fragments[a[0]]=i?g:1);return{fragment:g,cacheable:h}};d.fragments={};d.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){d.fn[a]=function(f){var g=[];f=d(f);var h=this.length===1&&this[0].parentNode;if(h&&h.nodeType===11&&
h.childNodes.length===1&&f.length===1){f[b](this[0]);return this}h=0;for(var i=f.length;h<i;h++){var m=(h>0?this.clone(true):this).get();d(f[h])[b](m);g=g.concat(m)}return this.pushStack(g,a,f.selector)}});d.extend({clone:function(a,b,f){var g=a.cloneNode(true),h,i,m;if(!d.support.noCloneEvent&&(a.nodeType===1||a.nodeType===11)&&!d.isXMLDoc(a)){h=a.getElementsByTagName("*");i=g.getElementsByTagName("*");for(m=0;h[m];++m)W(h[m],i[m]);W(a,g)}if(b){Y(a,g);if(f&&"getElementsByTagName"in a){h=a.getElementsByTagName("*");
i=g.getElementsByTagName("*");if(h.length)for(m=0;h[m];++m)Y(h[m],i[m])}}return g},clean:function(a,b,f,g){b=b||n;typeof b.createElement==="undefined"&&(b=b.ownerDocument||b[0]&&b[0].ownerDocument||n);for(var h=[],i=0,m;(m=a[i])!=null;i++){typeof m==="number"&&(m+="");if(m){if(typeof m!=="string"||wb.test(m)){if(typeof m==="string"){m=m.replace(Xa,"<$1></$2>");var p=(Ya.exec(m)||["",""])[1].toLowerCase(),s=la[p]||la._default,D=s[0],I=b.createElement("div");for(I.innerHTML=s[1]+m+s[2];D--;)I=I.lastChild;
if(!d.support.tbody){D=vb.test(m);p=p==="table"&&!D?I.firstChild&&I.firstChild.childNodes:s[1]==="<table>"&&!D?I.childNodes:[];for(s=p.length-1;s>=0;--s)d.nodeName(p[s],"tbody")&&!p[s].childNodes.length&&p[s].parentNode.removeChild(p[s])}!d.support.leadingWhitespace&&Oa.test(m)&&I.insertBefore(b.createTextNode(Oa.exec(m)[0]),I.firstChild);m=I.childNodes}}else m=b.createTextNode(m);m.nodeType?h.push(m):h=d.merge(h,m)}}if(f)for(i=0;h[i];i++)!g||!d.nodeName(h[i],"script")||h[i].type&&h[i].type.toLowerCase()!==
"text/javascript"?(h[i].nodeType===1&&h.splice.apply(h,[i+1,0].concat(d.makeArray(h[i].getElementsByTagName("script")))),f.appendChild(h[i])):g.push(h[i].parentNode?h[i].parentNode.removeChild(h[i]):h[i]);return h},cleanData:function(a){for(var b,f,g=d.cache,h=d.expando,i=d.event.special,m=d.support.deleteExpando,p=0,s;(s=a[p])!=null;p++)if(!(s.nodeName&&d.noData[s.nodeName.toLowerCase()]))if(f=s[d.expando]){if((b=g[f]&&g[f][h])&&b.events){for(var D in b.events)i[D]?d.event.remove(s,D):d.removeEvent(s,
D,b.handle);b.handle&&(b.handle.elem=null)}m?delete s[d.expando]:s.removeAttribute&&s.removeAttribute(d.expando);delete g[f]}}});var ab=/alpha\([^)]*\)/i,xb=/opacity=([^)]*)/,yb=/-([a-z])/ig,zb=/([A-Z])/g,bb=/^-?\d+(?:px)?$/i,Ab=/^-?\d/,Bb={position:"absolute",visibility:"hidden",display:"block"},kb=["Left","Right"],lb=["Top","Bottom"],Ca,cb,Ha,Cb=function(a,b){return b.toUpperCase()};d.fn.css=function(a,b){if(arguments.length===2&&b===e)return this;return d.access(this,a,b,true,function(f,g,h){return h!==
e?d.style(f,g,h):d.css(f,g)})};d.extend({cssHooks:{opacity:{get:function(a,b){if(b){var f=Ca(a,"opacity","opacity");return f===""?"1":f}return a.style.opacity}}},cssNumber:{zIndex:true,fontWeight:true,opacity:true,zoom:true,lineHeight:true},cssProps:{"float":d.support.cssFloat?"cssFloat":"styleFloat"},style:function(a,b,f,g){if(a&&a.nodeType!==3&&a.nodeType!==8&&a.style){var h,i=d.camelCase(b),m=a.style,p=d.cssHooks[i];b=d.cssProps[i]||i;if(f===e){if(p&&"get"in p&&(h=p.get(a,false,g))!==e)return h;
return m[b]}if(!(typeof f==="number"&&isNaN(f)||f==null)){typeof f==="number"&&!d.cssNumber[i]&&(f+="px");if(!p||!("set"in p)||(f=p.set(a,f))!==e)try{m[b]=f}catch(s){}}}},css:function(a,b,f){var g,h=d.camelCase(b),i=d.cssHooks[h];b=d.cssProps[h]||h;if(i&&"get"in i&&(g=i.get(a,true,f))!==e)return g;if(Ca)return Ca(a,b,h)},swap:function(a,b,f){var g={},h;for(h in b){g[h]=a.style[h];a.style[h]=b[h]}f.call(a);for(h in b)a.style[h]=g[h]},camelCase:function(a){return a.replace(yb,Cb)}});d.curCSS=d.css;
d.each(["height","width"],function(a,b){d.cssHooks[b]={get:function(f,g,h){var i;if(g){f.offsetWidth!==0?i=M(f,b,h):d.swap(f,Bb,function(){i=M(f,b,h)});if(i<=0){i=Ca(f,b,b);i==="0px"&&Ha&&(i=Ha(f,b,b));if(i!=null)return i===""||i==="auto"?"0px":i}if(i<0||i==null){i=f.style[b];return i===""||i==="auto"?"0px":i}return typeof i==="string"?i:i+"px"}},set:function(f,g){if(!bb.test(g))return g;g=parseFloat(g);if(g>=0)return g+"px"}}});d.support.opacity||(d.cssHooks.opacity={get:function(a,b){return xb.test((b&&
a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?parseFloat(RegExp.$1)/100+"":b?"1":""},set:function(a,b){var f=a.style;f.zoom=1;var g=d.isNaN(b)?"":"alpha(opacity="+b*100+")",h=f.filter||"";f.filter=ab.test(h)?h.replace(ab,g):f.filter+" "+g}});n.defaultView&&n.defaultView.getComputedStyle&&(cb=function(a,b,f){var g;f=f.replace(zb,"-$1").toLowerCase();if(!(b=a.ownerDocument.defaultView))return e;if(b=b.getComputedStyle(a,null)){g=b.getPropertyValue(f);g===""&&!d.contains(a.ownerDocument.documentElement,
a)&&(g=d.style(a,f))}return g});n.documentElement.currentStyle&&(Ha=function(a,b){var f,g=a.currentStyle&&a.currentStyle[b],h=a.runtimeStyle&&a.runtimeStyle[b],i=a.style;!bb.test(g)&&Ab.test(g)&&(f=i.left,h&&(a.runtimeStyle.left=a.currentStyle.left),i.left=b==="fontSize"?"1em":g||0,g=i.pixelLeft+"px",i.left=f,h&&(a.runtimeStyle.left=h));return g===""?"auto":g});Ca=cb||Ha;d.expr&&d.expr.filters&&(d.expr.filters.hidden=function(a){var b=a.offsetHeight;return a.offsetWidth===0&&b===0||!d.support.reliableHiddenOffsets&&
(a.style.display||d.css(a,"display"))==="none"},d.expr.filters.visible=function(a){return!d.expr.filters.hidden(a)});var Db=/%20/g,jb=/\[\]$/,db=/\r?\n/g,Eb=/#.*$/,Fb=/^(.*?):\s*(.*?)\r?$/mg,Gb=/^(?:color|date|datetime|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,Hb=/^(?:GET|HEAD)$/,Ib=/^\/\//,eb=/\?/,Jb=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,Kb=/^(?:select|textarea)/i,Sa=/\s+/,Lb=/([?&])_=[^&]*/,Mb=/^(\w+:)\/\/([^\/?#:]+)(?::(\d+))?/,fb=d.fn.load,La={},
gb={};d.fn.extend({load:function(a,b,f){if(typeof a!=="string"&&fb)return fb.apply(this,arguments);if(!this.length)return this;var g=a.indexOf(" ");if(g>=0){var h=a.slice(g,a.length);a=a.slice(0,g)}g="GET";b&&(d.isFunction(b)?(f=b,b=null):typeof b==="object"&&(b=d.param(b,d.ajaxSettings.traditional),g="POST"));var i=this;d.ajax({url:a,type:g,dataType:"html",data:b,complete:function(m,p,s){s=m.responseText;m.isResolved()&&(m.done(function(D){s=D}),i.html(h?d("<div>").append(s.replace(Jb,"")).find(h):
s));f&&i.each(f,[s,p,m])}});return this},serialize:function(){return d.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?d.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||Kb.test(this.nodeName)||Gb.test(this.type))}).map(function(a,b){var f=d(this).val();return f==null?null:d.isArray(f)?d.map(f,function(g){return{name:b.name,value:g.replace(db,"\r\n")}}):{name:b.name,value:f.replace(db,"\r\n")}}).get()}});
d.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(a,b){d.fn[b]=function(f){return this.bind(b,f)}});d.each(["get","post"],function(a,b){d[b]=function(f,g,h,i){d.isFunction(g)&&(i=i||h,h=g,g=null);return d.ajax({type:b,url:f,data:g,success:h,dataType:i})}});d.extend({getScript:function(a,b){return d.get(a,null,b,"script")},getJSON:function(a,b,f){return d.get(a,b,f,"json")},ajaxSetup:function(a){d.extend(true,d.ajaxSettings,a);a.context&&(d.ajaxSettings.context=
a.context)},ajaxSettings:{url:location.href,global:true,type:"GET",contentType:"application/x-www-form-urlencoded",processData:true,async:true,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":"*/*"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":c.String,"text html":true,"text json":d.parseJSON,"text xml":d.parseXML}},ajaxPrefilter:L(La),ajaxTransport:L(gb),
ajax:function(a,b){function f(w,A,G,H){if(j!==2){j=2;V&&clearTimeout(V);O=e;I=H||"";t.readyState=w?4:0;var Q,da,ca;if(G){H=g;var ha=t,fa=H.contents,T=H.dataTypes,o=H.responseFields,x,C,F,P;for(C in o)C in G&&(ha[o[C]]=G[C]);for(;T[0]==="*";){T.shift();x===e&&(x=ha.getResponseHeader("content-type"))}if(x)for(C in fa)if(fa[C]&&fa[C].test(x)){T.unshift(C);break}if(T[0]in G)F=T[0];else{for(C in G){if(!T[0]||H.converters[C+" "+T[0]]){F=C;break}P||(P=C)}F=F||P}if(F){F!==T[0]&&T.unshift(F);G=G[F]}else G=
void 0}else G=e;if(w>=200&&w<300||w===304){if(g.ifModified){if(x=t.getResponseHeader("Last-Modified"))d.lastModified[g.url]=x;if(x=t.getResponseHeader("Etag"))d.etag[g.url]=x}if(w===304){A="notmodified";Q=true}else try{x=g;x.dataFilter&&(G=x.dataFilter(G,x.dataType));var R=x.dataTypes,U=x.converters,aa,na=R.length,ma,ka=R[0],wa,Pa,sa,ua,xa;for(aa=1;aa<na;aa++){wa=ka;ka=R[aa];if(ka==="*")ka=wa;else if(wa!=="*"&&wa!==ka){Pa=wa+" "+ka;sa=U[Pa]||U["* "+ka];if(!sa){xa=e;for(ua in U){ma=ua.split(" ");if(ma[0]===
wa||ma[0]==="*")if(xa=U[ma[1]+" "+ka]){ua=U[ua];ua===true?sa=xa:xa===true&&(sa=ua);break}}}!sa&&!xa&&d.error("No conversion from "+Pa.replace(" "," to "));sa!==true&&(G=sa?sa(G):xa(ua(G)))}}da=G;A="success";Q=true}catch(Nb){A="parsererror";ca=Nb}}else{ca=A;w&&(A="error",w<0&&(w=0))}t.status=w;t.statusText=A;Q?m.resolveWith(h,[da,A,t]):m.rejectWith(h,[t,A,ca]);t.statusCode(s);s=e;g.global&&i.trigger("ajax"+(Q?"Success":"Error"),[t,g,Q?da:ca]);p.resolveWith(h,[t,A]);g.global&&(i.trigger("ajaxComplete",
[t,g]),--d.active||d.event.trigger("ajaxStop"))}}typeof b!=="object"&&(b=a,a=e);b=b||{};var g=d.extend(true,{},d.ajaxSettings,b),h=(g.context=("context"in b?b:d.ajaxSettings).context)||g,i=h===g?d.event:d(h),m=d.Deferred(),p=d._Deferred(),s=g.statusCode||{},D={},I,N,O,V,Z=n.location,ea=Z.protocol||"http:",ga,j=0,q,t={readyState:0,setRequestHeader:function(w,A){j===0&&(D[w.toLowerCase()]=A);return this},getAllResponseHeaders:function(){return j===2?I:null},getResponseHeader:function(w){var A;if(j===
2){if(!N)for(N={};A=Fb.exec(I);)N[A[1].toLowerCase()]=A[2];A=N[w.toLowerCase()]}return A||null},abort:function(w){w=w||"abort";O&&O.abort(w);f(0,w);return this}};m.promise(t);t.success=t.done;t.error=t.fail;t.complete=p.done;t.statusCode=function(w){if(w){var A;if(j<2)for(A in w)s[A]=[s[A],w[A]];else{A=w[t.status];t.then(A,A)}}return this};g.url=(""+(a||g.url)).replace(Eb,"").replace(Ib,ea+"//");g.dataTypes=d.trim(g.dataType||"*").toLowerCase().split(Sa);g.crossDomain||(ga=Mb.exec(g.url.toLowerCase()),
g.crossDomain=ga&&(ga[1]!=ea||ga[2]!=Z.hostname||(ga[3]||(ga[1]==="http:"?80:443))!=(Z.port||(ea==="http:"?80:443))));g.data&&g.processData&&typeof g.data!=="string"&&(g.data=d.param(g.data,g.traditional));J(La,g,b,t);g.type=g.type.toUpperCase();g.hasContent=!Hb.test(g.type);g.global&&d.active++===0&&d.event.trigger("ajaxStart");if(!g.hasContent){g.data&&(g.url+=(eb.test(g.url)?"&":"?")+g.data);if(g.cache===false){Z=d.now();ea=g.url.replace(Lb,"$1_="+Z);g.url=ea+(ea===g.url?(eb.test(g.url)?"&":"?")+
"_="+Z:"")}}if(g.data&&g.hasContent&&g.contentType!==false||b.contentType)D["content-type"]=g.contentType;g.ifModified&&(d.lastModified[g.url]&&(D["if-modified-since"]=d.lastModified[g.url]),d.etag[g.url]&&(D["if-none-match"]=d.etag[g.url]));D.accept=g.dataTypes[0]&&g.accepts[g.dataTypes[0]]?g.accepts[g.dataTypes[0]]+(g.dataTypes[0]!=="*"?", */*; q=0.01":""):g.accepts["*"];for(q in g.headers)D[q.toLowerCase()]=g.headers[q];if(!g.beforeSend||g.beforeSend.call(h,t,g)!==false&&j!==2){for(q in{success:1,
error:1,complete:1})t[q](g[q]);if(O=J(gb,g,b,t)){j=t.readyState=1;g.global&&i.trigger("ajaxSend",[t,g]);g.async&&g.timeout>0&&(V=setTimeout(function(){t.abort("timeout")},g.timeout));try{O.send(D,f)}catch(y){status<2?f(-1,y):d.error(y)}}else f(-1,"No Transport")}else{f(0,"abort");t=false}return t},param:function(a,b){var f=[],g=function(i,m){m=d.isFunction(m)?m():m;f[f.length]=encodeURIComponent(i)+"="+encodeURIComponent(m)};b===e&&(b=d.ajaxSettings.traditional);if(d.isArray(a)||a.jquery)d.each(a,
function(){g(this.name,this.value)});else for(var h in a)E(h,a[h],b,g);return f.join("&").replace(Db,"+")}});d.extend({active:0,lastModified:{},etag:{}});var Ob=d.now(),Ia=/(\=)\?(&|$)|()\?\?()/i;d.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return d.expando+"_"+Ob++}});d.ajaxPrefilter("json jsonp",function(a,b,f){f=typeof a.data==="string";if(a.dataTypes[0]==="jsonp"||b.jsonpCallback||b.jsonp!=null||a.jsonp!==false&&(Ia.test(a.url)||f&&Ia.test(a.data))){var g,h=a.jsonpCallback=d.isFunction(a.jsonpCallback)?
a.jsonpCallback():a.jsonpCallback,i=c[h];b=a.url;var m=a.data,p="$1"+h+"$2";a.jsonp!==false&&(b=b.replace(Ia,p),a.url===b&&(f&&(m=m.replace(Ia,p)),a.data===m&&(b+=(/\?/.test(b)?"&":"?")+a.jsonp+"="+h)));a.url=b;a.data=m;c[h]=function(s){g=[s]};a.complete=[function(){if(c[h]=i)g&&d.isFunction(i)&&c[h](g[0]);else try{delete c[h]}catch(s){}},a.complete];a.converters["script json"]=function(){g||d.error(h+" was not called");return g[0]};a.dataTypes[0]="json";return"script"}});d.ajaxSetup({accepts:{script:"text/javascript, application/javascript"},
contents:{script:/javascript/},converters:{"text script":function(a){d.globalEval(a);return a}}});d.ajaxPrefilter("script",function(a){a.cache===e&&(a.cache=false);a.crossDomain&&(a.type="GET",a.global=false)});d.ajaxTransport("script",function(a){if(a.crossDomain){var b,f=n.getElementsByTagName("head")[0]||n.documentElement;return{send:function(g,h){b=n.createElement("script");b.async="async";a.scriptCharset&&(b.charset=a.scriptCharset);b.src=a.url;b.onload=b.onreadystatechange=function(i,m){if(!b.readyState||
/loaded|complete/.test(b.readyState)){b.onload=b.onreadystatechange=null;f&&b.parentNode&&f.removeChild(b);b=e;m||h(200,"success")}};f.insertBefore(b,f.firstChild)},abort:function(){b&&b.onload(0,1)}}}});var Pb=d.now(),Qa={},hb,Da;d.ajaxSettings.xhr=c.ActiveXObject?function(){if(c.location.protocol!=="file:")try{return new c.XMLHttpRequest}catch(a){}try{return new c.ActiveXObject("Microsoft.XMLHTTP")}catch(b){}}:function(){return new c.XMLHttpRequest};try{Da=d.ajaxSettings.xhr()}catch(Tb){}d.support.ajax=
!!Da;d.support.cors=Da&&"withCredentials"in Da;Da=e;d.support.ajax&&d.ajaxTransport(function(a){if(!a.crossDomain||d.support.cors){var b;return{send:function(f,g){hb||(hb=1,d(c).bind("unload",function(){d.each(Qa,function(p,s){s.onreadystatechange&&s.onreadystatechange(1)})}));var h=a.xhr(),i;a.username?h.open(a.type,a.url,a.async,a.username,a.password):h.open(a.type,a.url,a.async);(!a.crossDomain||a.hasContent)&&!f["x-requested-with"]&&(f["x-requested-with"]="XMLHttpRequest");try{d.each(f,function(p,
s){h.setRequestHeader(p,s)})}catch(m){}h.send(a.hasContent&&a.data||null);b=function(p,s){if(b&&(s||h.readyState===4)){b=0;i&&(h.onreadystatechange=d.noop,delete Qa[i]);if(s)h.readyState!==4&&h.abort();else{var D=h.status,I,N=h.getAllResponseHeaders(),O={},V=h.responseXML;V&&V.documentElement&&(O.xml=V);O.text=h.responseText;try{I=h.statusText}catch(Z){I=""}D=D===0?!a.crossDomain||I?N?304:0:302:D==1223?204:D;g(D,I,O,N)}}};a.async&&h.readyState!==4?(i=Pb++,Qa[i]=h,h.onreadystatechange=b):b()},abort:function(){b&&
b(0,1)}}}});var Ka={},Qb=/^(?:toggle|show|hide)$/,Rb=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,Ja,Ra=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]];d.fn.extend({show:function(a,b,f){if(a||a===0)return this.animate(v("show",3),a,b,f);f=0;for(var g=this.length;f<g;f++){a=this[f];b=a.style.display;!d._data(a,"olddisplay")&&b==="none"&&(b=a.style.display="");b===""&&d.css(a,"display")==="none"&&d._data(a,"olddisplay",
r(a.nodeName))}for(f=0;f<g;f++){a=this[f];b=a.style.display;if(b===""||b==="none")a.style.display=d._data(a,"olddisplay")||""}return this},hide:function(a,b,f){if(a||a===0)return this.animate(v("hide",3),a,b,f);a=0;for(b=this.length;a<b;a++){f=d.css(this[a],"display");f!=="none"&&!d._data(this[a],"olddisplay")&&d._data(this[a],"olddisplay",f)}for(a=0;a<b;a++)this[a].style.display="none";return this},_toggle:d.fn.toggle,toggle:function(a,b,f){var g=typeof a==="boolean";d.isFunction(a)&&d.isFunction(b)?
this._toggle.apply(this,arguments):a==null||g?this.each(function(){var h=g?a:d(this).is(":hidden");d(this)[h?"show":"hide"]()}):this.animate(v("toggle",3),a,b,f);return this},fadeTo:function(a,b,f,g){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:b},a,f,g)},animate:function(a,b,f,g){var h=d.speed(b,f,g);if(d.isEmptyObject(a))return this.each(h.complete);return this[h.queue===false?"each":"queue"](function(){var i=d.extend({},h),m,p=this.nodeType===1,s=p&&d(this).is(":hidden"),
D=this;for(m in a){var I=d.camelCase(m);m!==I&&(a[I]=a[m],delete a[m],m=I);if(a[m]==="hide"&&s||a[m]==="show"&&!s)return i.complete.call(this);if(p&&(m==="height"||m==="width")){i.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY];if(d.css(this,"display")==="inline"&&d.css(this,"float")==="none")if(d.support.inlineBlockNeedsLayout)r(this.nodeName)==="inline"?this.style.display="inline-block":(this.style.display="inline",this.style.zoom=1);else this.style.display="inline-block"}d.isArray(a[m])&&
((i.specialEasing=i.specialEasing||{})[m]=a[m][1],a[m]=a[m][0])}i.overflow!=null&&(this.style.overflow="hidden");i.curAnim=d.extend({},a);d.each(a,function(N,O){var V=new d.fx(D,i,N);if(Qb.test(O))V[O==="toggle"?s?"show":"hide":O](a);else{var Z=Rb.exec(O),ea=V.cur()||0;if(Z){var ga=parseFloat(Z[2]),j=Z[3]||"px";j!=="px"&&(d.style(D,N,(ga||1)+j),ea*=(ga||1)/V.cur(),d.style(D,N,ea+j));Z[1]&&(ga=(Z[1]==="-="?-1:1)*ga+ea);V.custom(ea,ga,j)}else V.custom(ea,O,"")}});return true})},stop:function(a,b){var f=
d.timers;a&&this.queue([]);this.each(function(){for(var g=f.length-1;g>=0;g--)f[g].elem===this&&(b&&f[g](true),f.splice(g,1))});b||this.dequeue();return this}});d.each({slideDown:v("show",1),slideUp:v("hide",1),slideToggle:v("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){d.fn[a]=function(f,g,h){return this.animate(b,f,g,h)}});d.extend({speed:function(a,b,f){var g=a&&typeof a==="object"?d.extend({},a):{complete:f||!f&&b||d.isFunction(a)&&a,
duration:a,easing:f&&b||b&&!d.isFunction(b)&&b};g.duration=d.fx.off?0:typeof g.duration==="number"?g.duration:g.duration in d.fx.speeds?d.fx.speeds[g.duration]:d.fx.speeds._default;g.old=g.complete;g.complete=function(){g.queue!==false&&d(this).dequeue();d.isFunction(g.old)&&g.old.call(this)};return g},easing:{linear:function(a,b,f,g){return f+g*a},swing:function(a,b,f,g){return(-Math.cos(a*Math.PI)/2+0.5)*g+f}},timers:[],fx:function(a,b,f){this.options=b;this.elem=a;this.prop=f;b.orig||(b.orig={})}});
d.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this);(d.fx.step[this.prop]||d.fx.step._default)(this)},cur:function(){if(this.elem[this.prop]!=null&&(!this.elem.style||this.elem.style[this.prop]==null))return this.elem[this.prop];return parseFloat(d.css(this.elem,this.prop))||0},custom:function(a,b,f){function g(m){return h.step(m)}var h=this,i=d.fx;this.startTime=d.now();this.start=a;this.end=b;this.unit=f||this.unit||"px";this.now=this.start;this.pos=
this.state=0;g.elem=this.elem;g()&&d.timers.push(g)&&!Ja&&(Ja=setInterval(i.tick,i.interval))},show:function(){this.options.orig[this.prop]=d.style(this.elem,this.prop);this.options.show=true;this.custom(this.prop==="width"||this.prop==="height"?1:0,this.cur());d(this.elem).show()},hide:function(){this.options.orig[this.prop]=d.style(this.elem,this.prop);this.options.hide=true;this.custom(this.cur(),0)},step:function(a){var b=d.now(),f=true;if(a||b>=this.options.duration+this.startTime){this.now=
this.end;this.pos=this.state=1;this.update();this.options.curAnim[this.prop]=true;for(var g in this.options.curAnim)this.options.curAnim[g]!==true&&(f=false);if(f){if(this.options.overflow!=null&&!d.support.shrinkWrapBlocks){var h=this.elem,i=this.options;d.each(["","X","Y"],function(p,s){h.style["overflow"+s]=i.overflow[p]})}this.options.hide&&d(this.elem).hide();if(this.options.hide||this.options.show)for(var m in this.options.curAnim)d.style(this.elem,m,this.options.orig[m]);this.options.complete.call(this.elem)}return false}a=
b-this.startTime;this.state=a/this.options.duration;b=this.options.easing||(d.easing.swing?"swing":"linear");this.pos=d.easing[this.options.specialEasing&&this.options.specialEasing[this.prop]||b](this.state,a,0,1,this.options.duration);this.now=this.start+(this.end-this.start)*this.pos;this.update();return true}};d.extend(d.fx,{tick:function(){for(var a=d.timers,b=0;b<a.length;b++)a[b]()||a.splice(b--,1);a.length||d.fx.stop()},interval:13,stop:function(){clearInterval(Ja);Ja=null},speeds:{slow:600,
fast:200,_default:400},step:{opacity:function(a){d.style(a.elem,"opacity",a.now)},_default:function(a){a.elem.style&&a.elem.style[a.prop]!=null?a.elem.style[a.prop]=(a.prop==="width"||a.prop==="height"?Math.max(0,a.now):a.now)+a.unit:a.elem[a.prop]=a.now}}});d.expr&&d.expr.filters&&(d.expr.filters.animated=function(a){return d.grep(d.timers,function(b){return a===b.elem}).length});var Sb=/^t(?:able|d|h)$/i,ib=/^(?:body|html)$/i;"getBoundingClientRect"in n.documentElement?d.fn.offset=function(a){var b=
this[0],f;if(a)return this.each(function(m){d.offset.setOffset(this,a,m)});if(!b||!b.ownerDocument)return null;if(b===b.ownerDocument.body)return d.offset.bodyOffset(b);try{f=b.getBoundingClientRect()}catch(g){}var h=b.ownerDocument,i=h.documentElement;if(!f||!d.contains(i,b))return f?{top:f.top,left:f.left}:{top:0,left:0};b=h.body;h=k(h);return{top:f.top+(h.pageYOffset||d.support.boxModel&&i.scrollTop||b.scrollTop)-(i.clientTop||b.clientTop||0),left:f.left+(h.pageXOffset||d.support.boxModel&&i.scrollLeft||
b.scrollLeft)-(i.clientLeft||b.clientLeft||0)}}:d.fn.offset=function(a){var b=this[0];if(a)return this.each(function(D){d.offset.setOffset(this,a,D)});if(!b||!b.ownerDocument)return null;if(b===b.ownerDocument.body)return d.offset.bodyOffset(b);d.offset.initialize();var f,g=b.offsetParent,h=b.ownerDocument,i=h.documentElement,m=h.body;f=(h=h.defaultView)?h.getComputedStyle(b,null):b.currentStyle;for(var p=b.offsetTop,s=b.offsetLeft;(b=b.parentNode)&&b!==m&&b!==i;){if(d.offset.supportsFixedPosition&&
f.position==="fixed")break;f=h?h.getComputedStyle(b,null):b.currentStyle;p-=b.scrollTop;s-=b.scrollLeft;b===g&&(p+=b.offsetTop,s+=b.offsetLeft,d.offset.doesNotAddBorder&&(!d.offset.doesAddBorderForTableAndCells||!Sb.test(b.nodeName))&&(p+=parseFloat(f.borderTopWidth)||0,s+=parseFloat(f.borderLeftWidth)||0),g=b.offsetParent);d.offset.subtractsBorderForOverflowNotVisible&&f.overflow!=="visible"&&(p+=parseFloat(f.borderTopWidth)||0,s+=parseFloat(f.borderLeftWidth)||0)}if(f.position==="relative"||f.position===
"static"){p+=m.offsetTop;s+=m.offsetLeft}d.offset.supportsFixedPosition&&f.position==="fixed"&&(p+=Math.max(i.scrollTop,m.scrollTop),s+=Math.max(i.scrollLeft,m.scrollLeft));return{top:p,left:s}};d.offset={initialize:function(){var a=n.body,b=n.createElement("div"),f,g,h,i=parseFloat(d.css(a,"marginTop"))||0;d.extend(b.style,{position:"absolute",top:0,left:0,margin:0,border:0,width:"1px",height:"1px",visibility:"hidden"});b.innerHTML="<div style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;'><div></div></div><table style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;' cellpadding='0' cellspacing='0'><tr><td></td></tr></table>";
a.insertBefore(b,a.firstChild);f=b.firstChild;g=f.firstChild;h=f.nextSibling.firstChild.firstChild;this.doesNotAddBorder=g.offsetTop!==5;this.doesAddBorderForTableAndCells=h.offsetTop===5;g.style.position="fixed";g.style.top="20px";this.supportsFixedPosition=g.offsetTop===20||g.offsetTop===15;g.style.position=g.style.top="";f.style.overflow="hidden";f.style.position="relative";this.subtractsBorderForOverflowNotVisible=g.offsetTop===-5;this.doesNotIncludeMarginInBodyOffset=a.offsetTop!==i;a.removeChild(b);
d.offset.initialize=d.noop},bodyOffset:function(a){var b=a.offsetTop,f=a.offsetLeft;d.offset.initialize();d.offset.doesNotIncludeMarginInBodyOffset&&(b+=parseFloat(d.css(a,"marginTop"))||0,f+=parseFloat(d.css(a,"marginLeft"))||0);return{top:b,left:f}},setOffset:function(a,b,f){var g=d.css(a,"position");g==="static"&&(a.style.position="relative");var h=d(a),i=h.offset(),m=d.css(a,"top"),p=d.css(a,"left"),s=g==="absolute"&&d.inArray("auto",[m,p])>-1;g={};var D={};s&&(D=h.position());m=s?D.top:parseInt(m,
10)||0;p=s?D.left:parseInt(p,10)||0;d.isFunction(b)&&(b=b.call(a,f,i));b.top!=null&&(g.top=b.top-i.top+m);b.left!=null&&(g.left=b.left-i.left+p);"using"in b?b.using.call(a,g):h.css(g)}};d.fn.extend({position:function(){if(!this[0])return null;var a=this[0],b=this.offsetParent(),f=this.offset(),g=ib.test(b[0].nodeName)?{top:0,left:0}:b.offset();f.top-=parseFloat(d.css(a,"marginTop"))||0;f.left-=parseFloat(d.css(a,"marginLeft"))||0;g.top+=parseFloat(d.css(b[0],"borderTopWidth"))||0;g.left+=parseFloat(d.css(b[0],
"borderLeftWidth"))||0;return{top:f.top-g.top,left:f.left-g.left}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||n.body;a&&!ib.test(a.nodeName)&&d.css(a,"position")==="static";)a=a.offsetParent;return a})}});d.each(["Left","Top"],function(a,b){var f="scroll"+b;d.fn[f]=function(g){var h=this[0],i;if(!h)return null;if(g!==e)return this.each(function(){(i=k(this))?i.scrollTo(a?d(i).scrollLeft():g,a?g:d(i).scrollTop()):this[f]=g});return(i=k(h))?"pageXOffset"in i?i[a?
"pageYOffset":"pageXOffset"]:d.support.boxModel&&i.document.documentElement[f]||i.document.body[f]:h[f]}});d.each(["Height","Width"],function(a,b){var f=b.toLowerCase();d.fn["inner"+b]=function(){return this[0]?parseFloat(d.css(this[0],f,"padding")):null};d.fn["outer"+b]=function(g){return this[0]?parseFloat(d.css(this[0],f,g?"margin":"border")):null};d.fn[f]=function(g){var h=this[0];if(!h)return g==null?null:this;if(d.isFunction(g))return this.each(function(m){var p=d(this);p[f](g.call(this,m,p[f]()))});
if(d.isWindow(h)){var i=h.document.documentElement["client"+b];return h.document.compatMode==="CSS1Compat"&&i||h.document.body["client"+b]||i}if(h.nodeType===9)return Math.max(h.documentElement["client"+b],h.body["scroll"+b],h.documentElement["scroll"+b],h.body["offset"+b],h.documentElement["offset"+b]);if(g===e){h=d.css(h,f);i=parseFloat(h);return d.isNaN(i)?h:i}return this.css(f,typeof g==="string"?g:g+"px")}})})(window);
(function(){var c=this,e=c._,k={},r=Array.prototype,v=Object.prototype,E=r.slice,J=r.unshift,L=v.toString,M=v.hasOwnProperty,X=r.forEach,W=r.map,Y=r.reduce,ia=r.reduceRight,ja=r.filter,ra=r.every,va=r.some,oa=r.indexOf,pa=r.lastIndexOf;v=Array.isArray;var Ea=Object.keys,n=function(l){return new qa(l)};if(typeof module!=="undefined"&&module.exports){module.exports=n;n._=n}else c._=n;n.VERSION="1.1.4";var d=n.each=n.forEach=function(l,u,z){if(l!=null)if(X&&l.forEach===X)l.forEach(u,z);else if(n.isNumber(l.length))for(var B=
0,K=l.length;B<K;B++){if(u.call(z,l[B],B,l)===k)break}else for(B in l)if(M.call(l,B))if(u.call(z,l[B],B,l)===k)break};n.map=function(l,u,z){var B=[];if(l==null)return B;if(W&&l.map===W)return l.map(u,z);d(l,function(K,S,ba){B[B.length]=u.call(z,K,S,ba)});return B};n.reduce=n.foldl=n.inject=function(l,u,z,B){var K=z!==void 0;if(l==null)l=[];if(Y&&l.reduce===Y){if(B)u=n.bind(u,B);return K?l.reduce(u,z):l.reduce(u)}d(l,function(S,ba,Na){if(!K&&ba===0){z=S;K=true}else z=u.call(B,z,S,ba,Na)});if(!K)throw new TypeError("Reduce of empty array with no initial value");
return z};n.reduceRight=n.foldr=function(l,u,z,B){if(l==null)l=[];if(ia&&l.reduceRight===ia){if(B)u=n.bind(u,B);return z!==void 0?l.reduceRight(u,z):l.reduceRight(u)}l=(n.isArray(l)?l.slice():n.toArray(l)).reverse();return n.reduce(l,u,z,B)};n.find=n.detect=function(l,u,z){var B;Fa(l,function(K,S,ba){if(u.call(z,K,S,ba)){B=K;return true}});return B};n.filter=n.select=function(l,u,z){var B=[];if(l==null)return B;if(ja&&l.filter===ja)return l.filter(u,z);d(l,function(K,S,ba){if(u.call(z,K,S,ba))B[B.length]=
K});return B};n.reject=function(l,u,z){var B=[];if(l==null)return B;d(l,function(K,S,ba){u.call(z,K,S,ba)||(B[B.length]=K)});return B};n.every=n.all=function(l,u,z){u=u||n.identity;var B=true;if(l==null)return B;if(ra&&l.every===ra)return l.every(u,z);d(l,function(K,S,ba){if(!(B=B&&u.call(z,K,S,ba)))return k});return B};var Fa=n.some=n.any=function(l,u,z){u=u||n.identity;var B=false;if(l==null)return B;if(va&&l.some===va)return l.some(u,z);d(l,function(K,S,ba){if(B=u.call(z,K,S,ba))return k});return B};
n.include=n.contains=function(l,u){var z=false;if(l==null)return z;if(oa&&l.indexOf===oa)return l.indexOf(u)!=-1;Fa(l,function(B){if(z=B===u)return true});return z};n.invoke=function(l,u){var z=E.call(arguments,2);return n.map(l,function(B){return(u?B[u]:B).apply(B,z)})};n.pluck=function(l,u){return n.map(l,function(z){return z[u]})};n.max=function(l,u,z){if(!u&&n.isArray(l))return Math.max.apply(Math,l);var B={computed:-Infinity};d(l,function(K,S,ba){S=u?u.call(z,K,S,ba):K;S>=B.computed&&(B={value:K,
computed:S})});return B.value};n.min=function(l,u,z){if(!u&&n.isArray(l))return Math.min.apply(Math,l);var B={computed:Infinity};d(l,function(K,S,ba){S=u?u.call(z,K,S,ba):K;S<B.computed&&(B={value:K,computed:S})});return B.value};n.sortBy=function(l,u,z){return n.pluck(n.map(l,function(B,K,S){return{value:B,criteria:u.call(z,B,K,S)}}).sort(function(B,K){var S=B.criteria,ba=K.criteria;return S<ba?-1:S>ba?1:0}),"value")};n.sortedIndex=function(l,u,z){z=z||n.identity;for(var B=0,K=l.length;B<K;){var S=
B+K>>1;z(l[S])<z(u)?B=S+1:K=S}return B};n.toArray=function(l){if(!l)return[];if(l.toArray)return l.toArray();if(n.isArray(l))return l;if(n.isArguments(l))return E.call(l);return n.values(l)};n.size=function(l){return n.toArray(l).length};n.first=n.head=function(l,u,z){return u&&!z?E.call(l,0,u):l[0]};n.rest=n.tail=function(l,u,z){return E.call(l,n.isUndefined(u)||z?1:u)};n.last=function(l){return l[l.length-1]};n.compact=function(l){return n.filter(l,function(u){return!!u})};n.flatten=function(l){return n.reduce(l,
function(u,z){if(n.isArray(z))return u.concat(n.flatten(z));u[u.length]=z;return u},[])};n.without=function(l){var u=E.call(arguments,1);return n.filter(l,function(z){return!n.include(u,z)})};n.uniq=n.unique=function(l,u){return n.reduce(l,function(z,B,K){if(0==K||(u===true?n.last(z)!=B:!n.include(z,B)))z[z.length]=B;return z},[])};n.intersect=function(l){var u=E.call(arguments,1);return n.filter(n.uniq(l),function(z){return n.every(u,function(B){return n.indexOf(B,z)>=0})})};n.zip=function(){for(var l=
E.call(arguments),u=n.max(n.pluck(l,"length")),z=Array(u),B=0;B<u;B++)z[B]=n.pluck(l,""+B);return z};n.indexOf=function(l,u,z){if(l==null)return-1;if(z){z=n.sortedIndex(l,u);return l[z]===u?z:-1}if(oa&&l.indexOf===oa)return l.indexOf(u);z=0;for(var B=l.length;z<B;z++)if(l[z]===u)return z;return-1};n.lastIndexOf=function(l,u){if(l==null)return-1;if(pa&&l.lastIndexOf===pa)return l.lastIndexOf(u);for(var z=l.length;z--;)if(l[z]===u)return z;return-1};n.range=function(l,u,z){var B=E.call(arguments),K=
B.length<=1;l=K?0:B[0];u=K?B[0]:B[1];z=B[2]||1;B=Math.max(Math.ceil((u-l)/z),0);K=0;for(var S=Array(B);K<B;){S[K++]=l;l+=z}return S};n.bind=function(l,u){var z=E.call(arguments,2);return function(){return l.apply(u||{},z.concat(E.call(arguments)))}};n.bindAll=function(l){var u=E.call(arguments,1);if(u.length==0)u=n.functions(l);d(u,function(z){l[z]=n.bind(l[z],l)});return l};n.memoize=function(l,u){var z={};u=u||n.identity;return function(){var B=u.apply(this,arguments);return B in z?z[B]:z[B]=l.apply(this,
arguments)}};n.delay=function(l,u){var z=E.call(arguments,2);return setTimeout(function(){return l.apply(l,z)},u)};n.defer=function(l){return n.delay.apply(n,[l,1].concat(E.call(arguments,1)))};var ya=function(l,u,z){var B;return function(){var K=this,S=arguments,ba=function(){B=null;l.apply(K,S)};z&&clearTimeout(B);if(z||!B)B=setTimeout(ba,u)}};n.throttle=function(l,u){return ya(l,u,false)};n.debounce=function(l,u){return ya(l,u,true)};n.wrap=function(l,u){return function(){var z=[l].concat(E.call(arguments));
return u.apply(this,z)}};n.compose=function(){var l=E.call(arguments);return function(){for(var u=E.call(arguments),z=l.length-1;z>=0;z--)u=[l[z].apply(this,u)];return u[0]}};n.keys=Ea||function(l){if(n.isArray(l))return n.range(0,l.length);var u=[],z;for(z in l)if(M.call(l,z))u[u.length]=z;return u};n.values=function(l){return n.map(l,n.identity)};n.functions=n.methods=function(l){return n.filter(n.keys(l),function(u){return n.isFunction(l[u])}).sort()};n.extend=function(l){d(E.call(arguments,1),
function(u){for(var z in u)l[z]=u[z]});return l};n.clone=function(l){return n.isArray(l)?l.slice():n.extend({},l)};n.tap=function(l,u){u(l);return l};n.isEqual=function(l,u){if(l===u)return true;var z=typeof l;if(z!=typeof u)return false;if(l==u)return true;if(!l&&u||l&&!u)return false;if(l._chain)l=l._wrapped;if(u._chain)u=u._wrapped;if(l.isEqual)return l.isEqual(u);if(n.isDate(l)&&n.isDate(u))return l.getTime()===u.getTime();if(n.isNaN(l)&&n.isNaN(u))return false;if(n.isRegExp(l)&&n.isRegExp(u))return l.source===
u.source&&l.global===u.global&&l.ignoreCase===u.ignoreCase&&l.multiline===u.multiline;if(z!=="object")return false;if(l.length&&l.length!==u.length)return false;z=n.keys(l);var B=n.keys(u);if(z.length!=B.length)return false;for(var K in l)if(!(K in u)||!n.isEqual(l[K],u[K]))return false;return true};n.isEmpty=function(l){if(n.isArray(l)||n.isString(l))return l.length===0;for(var u in l)if(M.call(l,u))return false;return true};n.isElement=function(l){return!!(l&&l.nodeType==1)};n.isArray=v||function(l){return L.call(l)===
"[object Array]"};n.isArguments=function(l){return!!(l&&M.call(l,"callee"))};n.isFunction=function(l){return!!(l&&l.constructor&&l.call&&l.apply)};n.isString=function(l){return!!(l===""||l&&l.charCodeAt&&l.substr)};n.isNumber=function(l){return!!(l===0||l&&l.toExponential&&l.toFixed)};n.isNaN=function(l){return l!==l};n.isBoolean=function(l){return l===true||l===false};n.isDate=function(l){return!!(l&&l.getTimezoneOffset&&l.setUTCFullYear)};n.isRegExp=function(l){return!!(l&&l.test&&l.exec&&(l.ignoreCase||
l.ignoreCase===false))};n.isNull=function(l){return l===null};n.isUndefined=function(l){return l===void 0};n.noConflict=function(){c._=e;return this};n.identity=function(l){return l};n.times=function(l,u,z){for(var B=0;B<l;B++)u.call(z,B)};n.mixin=function(l){d(n.functions(l),function(u){Ma(u,n[u]=l[u])})};var za=0;n.uniqueId=function(l){var u=za++;return l?l+u:u};n.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g};n.template=function(l,u){var z=n.templateSettings;z="var __p=[],print=function(){__p.push.apply(__p,arguments);};with(obj||{}){__p.push('"+
l.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(z.interpolate,function(B,K){return"',"+K.replace(/\\'/g,"'")+",'"}).replace(z.evaluate||null,function(B,K){return"');"+K.replace(/\\'/g,"'").replace(/[\r\n\t]/g," ")+"__p.push('"}).replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/\t/g,"\\t")+"');}return __p.join('');";z=new Function("obj",z);return u?z(u):z};var qa=function(l){this._wrapped=l};n.prototype=qa.prototype;var Aa=function(l,u){return u?n(l).chain():l},Ma=function(l,u){qa.prototype[l]=
function(){var z=E.call(arguments);J.call(z,this._wrapped);return Aa(u.apply(n,z),this._chain)}};n.mixin(n);d(["pop","push","reverse","shift","sort","splice","unshift"],function(l){var u=r[l];qa.prototype[l]=function(){u.apply(this._wrapped,arguments);return Aa(this._wrapped,this._chain)}});d(["concat","join","slice"],function(l){var u=r[l];qa.prototype[l]=function(){return Aa(u.apply(this._wrapped,arguments),this._chain)}});qa.prototype.chain=function(){this._chain=true;return this};qa.prototype.value=
function(){return this._wrapped}})();function SuperSlider(c,e){this.id=c;this.init(e);return this.slider}
SuperSlider.prototype={init:function(c){var e=this;this.options={slider_class:"ss_slider",track_class:"ss_track",handle_class:"ss_handle",input_class:"ss_input",label_class:"ss_label",min:0,max:1,step:0.01,"default":0.5,decimal_places:3,label:null,name:null,hide_slider:false,hide_input:false};this.options=$.extend({},this.options,c);this.slider=$("<div>").addClass(this.options.slider_class).attr("id",this.id).data("superslider",this).css("webkitUserSelect","none");this.track=$("<div>").addClass(this.options.track_class);
this.handle=$("<div>").addClass(this.options.handle_class);this.input=$("<input>").attr("type",this.options.hide_input?"hidden":"input").addClass(this.options.input_class).attr("name",this.options.name||this.id).attr("value",this.options["default"]);if(this.options.label){this.label=$("<label>").text(this.options.label).addClass(this.options.label_class).attr("title","Click to reset to default");this.slider.append(this.label.get(0))}this.track.append(this.handle.get(0));this.slider.append(this.track.get(0));
this.slider.append(this.input.get(0));this.options.hide_slider&&this.track.hide();this.mouseDown=function(k){e.startDrag(k)};this.mouseMove=function(k){e.onDrag(k)};this.mouseUp=function(k){e.endDrag(k)};this.mouseOver=function(k){e.infocus=true;k.stopPropagation()};this.mouseOut=function(k){e.infocus=false;k.stopPropagation()};this.keyDown=function(k){e.keyPress(k)};this.startEdit=function(){e.editing=true};this.endEdit=function(){e.value(e.input.get(0).value);e.editing=false};this.labelClick=function(){e.updateSlider(e.options["default"]);
return false};this.slider.bind("DOMNodeInserted",function(k){e.sliderInserted(k);e.initialised=true});this.infocus=false;this.slider.data("slider",this)},sliderInserted:function(){var c=this;window.setTimeout(function(){c.handle_width=parseInt(window.getComputedStyle(c.handle.get(0),null).getPropertyValue("width"),10);c.track_width=parseInt(window.getComputedStyle(c.track.get(0),null).getPropertyValue("width"),10)-c.handle_width;c.updateSlider(c.options["default"]);c.label&&c.label.bind("click",c.labelClick);
c.track.bind("mousedown",c.mouseDown);c.track.bind("selectstart",function(){return false});c.slider.bind("mouseover",c.mouseOver);c.slider.bind("mouseout",c.mouseOut);c.input.bind("blur",c.endEdit);document.addEventListener("keydown",c.keyDown,false)},1)},value:function(c){typeof c!=="undefined"&&this.updateSlider(c);return this.val},updateSlider:function(c){var e=this.round(parseFloat(Math.min(Math.max(c,this.options.min),this.options.max)),this.options.decimal_places),k=this.track_width*((e-this.options.min)/
(this.options.max-this.options.min));if(isNaN(e)||c===""){this.input.attr("value",this.val);this.input.get(0).value=this.val}else{this.handle.css("left",k);this.val=e;this.input.attr("value",this.val);this.input.get(0).value=this.val;this.input.get(0).val=this.val;if(this.initialised&&this.old_val!==this.val){this.input.trigger("change");this.old_val=this.val}}},startDrag:function(c){if(c.currentTarget===c.target){this.ox=this.handle_width/2;this.onDrag(c)}else this.ox=c.offsetX||c.layerX;this.track.get(0).addEventListener("mousemove",
this.mouseMove,false);$("body").bind("mouseup",this.mouseUp)},onDrag:function(c){var e;e=c.currentTarget===c.target?c.offsetX||c.layerX:c.target.offsetLeft+(c.offsetX||c.layerX);e-=this.ox;e=e/this.track_width*(this.options.max-this.options.min);c.altKey||(e=Math.floor(e/this.options.step)*this.options.step);this.updateSlider(this.options.min+e)},endDrag:function(){this.track.get(0).removeEventListener("mousemove",this.mouseMove,false);$("body").unbind("mouseup",this.mouseUp)},keyPress:function(c){var e=
1;if(this.infocus){if(c.shiftKey&&c.altKey)e=0.01;else if(c.altKey)e=0.1;else if(c.shiftKey)e=10;switch(c.keyCode){case 38:this.value(this.val+=this.options.step*e);c.preventDefault();return false;case 40:this.value(this.val-=this.options.step*e);c.preventDefault();return false;case 13:this.input.get(0).blur();c.preventDefault();return false}}return true},round:function(c,e){var k=Math.pow(10,e||1);return Math.round(c*k)/k}};
function Color(c,e,k){this._b=this._g=this._r=0;if(typeof c==="object"){this.r(c[0],false);this.g(c[1],false);this.b(c[2],false)}else if(typeof c==="string")this.hex(c);else{this.r(c,false);this.g(e,false);this.b(k,false)}this.rgb2hsv()}
Color.rgb2hsv=function(c,e,k){c=typeof c==="number"?[c/255,e/255,k/255]:[c.r/255,c.g/255,c.b/255];e=Math.max(c[0],Math.max(c[1],c[2]));var r=e-Math.min(c[0],Math.min(c[1],c[2])),v,E,J;if(r===0)k=v=0;else{k=r/e;E=((e-c[0])/6+r/2)/r;J=((e-c[1])/6+r/2)/r;r=((e-c[2])/6+r/2)/r;if(c[0]===e)v=r-J;else if(c[1]===e)v=1/3+E-r;else if(c[2]===e)v=2/3+J-E;if(v<0)v+=1;if(v>1)v-=1}return[Math.round(v*359),Math.round(k*100),Math.round(e*100)]};
Color.hsv2rgb=function(c,e,k){var r,v,E,J,L,M;c/=359;e/=100;k/=100;if(c===1)c=0;if(k===0)return[0,0,0];else if(e===0){k*=255;return[k,k,k]}else{c*=6;M=parseInt(Math.floor(c),10);J=c-M;c=k*(1-e);L=k*(1-e*J);e=k*(1-e*(1-J));if(M===0){r=k;v=e;E=c}else if(M===1){r=L;v=k;E=c}else if(M===2){r=c;v=k;E=e}else if(M===3){r=c;v=L;E=k}else if(M===4){r=e;v=c;E=k}else if(M===5){r=k;v=c;E=L}}return[Math.round(r*255),Math.round(v*255),Math.round(E*255)]};
Color.mix=function(c,e,k){var r=c.r()*k+e.r()*(1-k),v=c.g()*k+e.g()*(1-k);c=c.b()*k+e.b()*(1-k);return new Color([r,v,c])};
Color.prototype={r:function(c,e){if(typeof c!=="undefined"){this._r=this.clamp(c,255);e!==false&&this.rgb2hsv()}return this.clamp(this._r,255,true)},g:function(c,e){if(typeof c!=="undefined"){this._g=this.clamp(c,255);e!==false&&this.rgb2hsv()}return this.clamp(this._g,255,true)},b:function(c,e){if(typeof c!=="undefined"){this._b=this.clamp(c,255);e!==false&&this.rgb2hsv()}return this.clamp(this._b,255,true)},red:function(c,e){return this.r(c,e)},green:function(c,e){return this.g(c,e)},blue:function(c,
e){return this.b(c,e)},_rgbParam:function(c,e,k){if(typeof e!=="undefined"){c=this.clamp(e,255);k!==false&&this.rgb2hsv()}return this.clamp(c,255,true)},rgb:function(c){if(typeof c==="object"){this._r=this.clamp(c[0],255);this._g=this.clamp(c[1],255);this._b=this.clamp(c[2],255);this.rgb2hsv()}return[this.r(),this.g(),this.b()]},h:function(c){if(typeof c!=="undefined"){this._h=this.clamp(c,359);this.hsv2rgb()}return this.clamp(this._h,359,true)},s:function(c){if(typeof c!=="undefined"){this._s=this.clamp(c,
100);this.hsv2rgb()}return this.clamp(this._s,100,true)},v:function(c){if(typeof c!=="undefined"){this._v=this.clamp(c,100);this.hsv2rgb()}return this.clamp(this._v,100,true)},hue:function(c){return this.h(c)},saturation:function(c){return this.s(c)},brightness:function(c){return this.v(c)},hsv:function(c){if(typeof c==="object"){this._h=this.clamp(c[0],359);this._s=this.clamp(c[1],100);this._v=this.clamp(c[2],100);this.hsv2rgb()}return[this.h(),this.s(),this.v()]},hsv2rgb:function(){var c=Color.hsv2rgb(this._h,
this._s,this._v);this._r=c[0];this._g=c[1];this._b=c[2]},rgb2hsv:function(){var c=Color.rgb2hsv(this._r,this._g,this._b);this._h=c[0];this._s=c[1];this._v=c[2]},normalized:function(){return[this._r/255,this._g/255,this._b/255]},hsv_normalized:function(){return[this._h/359,this._s/100,this._v/100]},hex:function(c){var e="";if(typeof c==="string"){c=c.replace(RegExp("[^0-9a-f]","gi"),"");if(c.length===3)c+=c;else if(c.length===2)c+=c+c;this._r=parseInt(c.substring(0,2)||0,16);this._g=parseInt(c.substring(2,
4)||0,16);this._b=parseInt(c.substring(4,6)||0,16);this.rgb2hsv()}for(c=0;c<3;c+=1){if(this.rgb()[c]<16)e+="0";e+=this.rgb()[c].toString(16)}return e.toUpperCase()},css:function(){return"rgb("+this.r()+","+this.g()+","+this.b()+")"},clamp:function(c,e,k){c=parseFloat(c,10)||0;if(typeof c!=="number")c=0;return k?Math.min(Math.max(Math.floor(c),0),e):Math.min(Math.max(c,0),e)},toString:function(){return"Color [red: "+this.r()+", green: "+this.g()+", blue: "+this.b()+", hue: "+this.h()+", saturation: "+
this.s()+", brightness: "+this.v()+"]"},clone:function(){return new Color(this.rgb())}};function ColorPicker(c){this.init(c);this.container.data("color_picker",this);return this.container}
ColorPicker.prototype={init:function(c){var e=this,k={container_class:"cp_container",canvas_container_class:"cp_canvas_container",canvas_class:"cp_canvas",canvas_slider_class:"cp_canvas_slider",slider_cursor_class:"cp_slider_cursor",ui_class:"cp_ui",label_class:"cp_label",radio_class:"cp_radio",input_class:"cp_input",hex_input_class:"cp_hex_input",cursor_class:"cp_cursor",colorbox_class:"cp_colorbox",canvas_overlay:"cp_overlay",canvas_slider_overlay:"cp_slider_overlay",width:256,height:256,base_color:new Color(255,
0,0),current_color:new Color(255,0,0),old_color:new Color(255,0,0),amount:1,mode:0,vertex_path:null,fragment_path:null};this.options=$.extend({},k,c);$.each(["base_color","current_color","base_color"],function(r,v){if(typeof e.options[v].length==="number")e.options[v]=new Color(e.options[v])});this.color_for_slider=this.options.base_color;this.onDown=function(r){e.sampleCanvas(r);e.canvas_overlay.bind("mousemove",e.onDrag);e.canvas_overlay.bind("mouseup mouseout",e.onUp)};this.onDrag=function(r){e.sampleCanvas(r)};
this.onUp=function(){e.canvas_overlay.unbind("mousemove mouseup")};this.onSliderDown=function(r){e.canvas_slider_overlay.bind("mousemove",e.onSliderDrag);e.canvas_slider_overlay.bind("mouseup mouseout",e.onSliderUp);e.onSliderDrag(r)};this.onSliderDrag=function(r){e.sliderEvent(Math.max(Math.min(((r.offsetX||r.layerX)-10)/e.options.width,1),0))};this.onSliderUp=function(){e.canvas_slider_overlay.unbind("mousemove mouseup mouseout")};this.inputChange=function(){e.options.mode<3?e.updateHSB():e.updateRGB();
e.updateColor();e.switchMode()};this.hexChange=function(r){e.updateColor(new Color(r.target.value));e.switchMode()};this.resetColor=function(){e.updateColor(e.options.base_color);e.switchMode()};this.initUI();this.current_mode="cb_Hue";this.container.bind("DOMNodeInserted",function(){e.palette||e.initWebGL()})},initUI:function(){var c=this,e,k,r;this.container=$("<div>").addClass(this.options.container_class).data("picker",this);this.canvas_container=$("<div>").attr({width:this.options.width,height:this.options.height}).addClass(this.options.canvas_container_class);
this.canvas=$("<canvas>").attr({width:this.options.width,height:this.options.height}).addClass(this.options.canvas_class);this.canvas_slider=$("<canvas>").attr({width:this.options.width,height:20}).addClass(this.options.canvas_slider_class);this.canvas_container.append(this.canvas);this.canvas_container.append(this.canvas_slider);this.cy=this.cx=0;this.cursor=$("<span>").addClass(this.options.cursor_class).css({left:this.cx,top:this.cy});this.ui=$("<div>").addClass(this.options.ui_class);this.slider_cursor=
$("<span>").addClass(this.options.slider_cursor_class).css({left:this.cx,top:this.options.height+4}).appendTo(this.canvas_container);this.canvas_slider_overlay=$("<div>").addClass(this.options.canvas_slider_overlay).appendTo(this.canvas_container).bind("mousedown",this.onSliderDown).bind("selectstart",function(){return false});this.canvas_overlay=$("<div>").addClass(this.options.canvas_overlay).bind("mousedown",this.onDown).bind("selectstart",function(){return false});this.canvas_container.append(this.cursor);
this.canvas_container.append(this.canvas_overlay);this.container.append(this.canvas_container);this.container.append(this.ui);this.color_box=$("<div>").addClass(this.options.colorbox_class);this.color_box1=$("<span>").addClass(this.options.colorbox_class+"_1").css("backgroundColor",this.options.current_color.hex());this.color_box2=$("<span>").addClass(this.options.colorbox_class+"_2").css("backgroundColor",this.options.base_color.hex()).click(this.resetColor);this.color_box.append(this.color_box1);
this.color_box.append(this.color_box2);this.ui.append(this.color_box);$.each(["Hue","Saturation","Brightness","Red","Green","Blue"],function(v,E){e=$("<label>").addClass(c.options.label_class+" cp_label_"+E).attr("for","cb_"+E).text(E[0]);k=$("<input>").addClass(c.options.radio_class).attr({id:"cb_"+E,value:v,name:"cp_mode",type:"radio"});e.prepend(k);r=$("<input>").addClass(c.options.input_class).attr({id:"inp_"+E,value:0,type:"text",maxlength:3}).bind("change blur",c.inputChange);c["inp_"+E]=r;
e.prepend(r);c.ui.append(e);k.bind("change",function(J){c.switchMode(J)})});e=$("<label>").addClass(c.options.label_class+" cp_label_hex").attr("for","cb_hex").text("#");this.hex_input=$("<input>").attr({type:"text",maxlength:7}).addClass(c.options.hex_input_class).change(c.hexChange).appendTo(e);this.ui.append(e)},initWebGL:function(){var c=this;this.palette=new GLQuad({canvas:this.canvas,vertex:null,fragment:null,width:this.options.width,height:this.options.height,vertex_path:this.options.vertex_path,
fragment_path:this.options.fragment_path});this.palette_quad=this.palette.data("GLQuad");this.palette.bind("loaded",function(){}).bind("ready",function(){c.palette_slider=new GLQuad({canvas:c.canvas_slider,vertex:c.palette_quad.options.vertex,fragment:c.palette_quad.options.fragment,width:c.options.width,height:20});c.palette_slider_quad=c.palette_slider.data("GLQuad");$("input[type=radio]",c.ui).first().attr("checked",true).trigger("change")}).bind("error",function(e){console.log("Error",$(e.target).data("GLQuad").error)})},
setColor:function(c){this.options.old_color=new Color(c);this.options.base_color=new Color(c);this.color_for_slider=this.options.base_color;this.updateColor(this.options.old_color);this.canvas_overlay.unbind("mousemove mouseup mouseout");this.canvas_slider_overlay.unbind("mousemove mouseup mouseout");this.switchMode()},switchMode:function(c){var e=c?parseInt(c.target.value,10):this.options.mode,k,r=this.options.current_color.hsv_normalized(),v=this.options.current_color.normalized();switch(e){case 0:k=
r[0];this.cx=r[1]*this.options.width;this.cy=(1-r[2])*this.options.height;break;case 1:k=r[1];this.cx=r[0]*this.options.width;this.cy=(1-r[2])*this.options.height;break;case 2:k=r[2];this.cx=r[0]*this.options.width;this.cy=(1-r[1])*this.options.height;break;case 3:k=v[0];this.cx=v[2]*this.options.width;this.cy=(1-v[1])*this.options.height;break;case 4:k=v[1];this.cx=v[2]*this.options.width;this.cy=(1-v[0])*this.options.height;break;case 5:k=v[2];this.cx=v[0]*this.options.width;this.cy=(1-v[1])*this.options.height}this.options.mode=
e;this.sliderEvent(k);if(e===2)this.color_for_slider=this.options.current_color;this.cursor.css({left:this.cx,top:this.cy});this.current_mode=c&&c.currentTarget.id||this.current_mode||"cb_Hue"},sliderEvent:function(c){this.slider_cursor.css("left",c*this.options.width);this.options.amount=c;$("#"+this.current_mode.replace("cb_","inp_")).val(Math.round(c*[359,100,100,255,255,255][this.options.mode]));this.options.mode<3?this.updateHSB():this.updateRGB();this.updateColor(this.samplePalette(this.cx,
this.cy))},sampleCanvas:function(c){var e=(c.offsetY||c.layerY)-11;this.cx=Math.max(Math.min((c.offsetX||c.layerX)-11,this.options.width-1),0);this.cy=Math.max(Math.min(e,this.options.height-1),0);this.cursor.css({left:this.cx,top:this.cy});c=this.samplePalette(this.cx,this.cy);this.color_for_slider=c.clone();this.color_for_slider.brightness(100);this.updateColor(c)},samplePalette:function(c,e){var k=new Color;c/=this.options.width;e/=this.options.height;e=1-e;switch(this.options.mode){case 0:k.hsv([360*
this.options.amount,101*c,101*e]);break;case 1:k.hsv([360*c,101*this.options.amount,101*e]);break;case 2:k.hsv([360*c,101*e,101*this.options.amount]);break;case 3:k=new Color([this.options.amount*255,e*255,c*255]);break;case 4:k=new Color([e*255,this.options.amount*255,c*255]);break;case 5:k=new Color([c*255,e*255,this.options.amount*255])}return k},updateRGB:function(){this.options.current_color=new Color([this.inp_Red.val(),this.inp_Green.val(),this.inp_Blue.val()])},updateHSB:function(){this.options.current_color.hsv([this.inp_Hue.val(),
this.inp_Saturation.val(),this.inp_Brightness.val()])},updateColor:function(c){if(c)this.options.current_color=c;this.color_box1.css("background-color",this.options.current_color.css());this.color_box2.css("background-color",this.options.old_color.css());this.inp_Red.val(this.options.current_color.r());this.inp_Green.val(this.options.current_color.g());this.inp_Blue.val(this.options.current_color.b());this.inp_Hue.val(this.options.current_color.h());this.inp_Saturation.val(this.options.current_color.s());
this.inp_Brightness.val(this.options.current_color.v());this.hex_input.val(this.options.current_color.hex());this.draw()},draw:function(){var c;if(this.palette_slider_quad){c=new Color;if(this.options.mode===0){c.hue(this.options.amount*359);c.saturation(100);c.brightness(100);this.options.base_color=c;this.options.slider_color=c.normalized()}else if(this.options.mode===1){this.options.slider_color1=[this.options.current_color.hue()/359,1,1];this.options.slider_color2=[this.options.slider_color1[0],
0,Math.max(this.options.current_color.brightness()/100,0.33)];c.hue(this.options.current_color.hue());c.saturation(100);c.brightness(100);this.options.base_color=c}else if(this.options.mode===2){c.hue(this.options.current_color.hue());c.saturation(100);c.brightness(100);this.options.slider_color=c.normalized();this.options.slider_color1=this.color_for_slider.normalized();this.options.base_color=this.options.current_color}else if(this.options.mode===3){c.rgb([255,this.options.current_color.g(),this.options.current_color.b()]);
this.options.slider_color1=c.normalized();c.red(0);this.options.slider_color2=c.normalized()}else if(this.options.mode===4){c.rgb([this.options.current_color.r(),255,this.options.current_color.b()]);this.options.slider_color1=c.normalized();c.green(0);this.options.slider_color2=c.normalized()}else if(this.options.mode===5){c.rgb([this.options.current_color.r(),this.options.current_color.g(),255]);this.options.slider_color1=c.normalized();c.blue(0);this.options.slider_color2=c.normalized()}this.palette_quad.parameters=
{amount:this.options.amount,base_color:this.options.base_color.normalized(),mode:this.options.mode};this.palette_slider_quad.parameters={amount:this.options.slider_amount||0,base_color:this.options.slider_color,color1:this.options.slider_color1||[0,0,0],color2:this.options.slider_color2||[0,0,0],mode:this.options.mode+6};this.palette_quad.draw();this.palette_slider_quad.draw();this.container.trigger("change",[this.options.current_color])}}};function GLQuad(c){this.init(c);return this.canvas}
GLQuad.supported=function(c){var e=["webgl","experimental-webgl","webkit-3d","moz-webgl"],k,r;for(r=0;r<e.length;r+=1){try{k=(c||$("<canvas>")).get(0).getContext(e[r])}catch(v){}if(k)break}return k};
GLQuad.prototype={init:function(c){var e=this;this.options={canvas:null,canvas_class:"gl_canvas",width:400,height:400,vertex:null,fragment:null,vertext_path:null,fragment_path:null,magic_define:"dE"};$.extend(this.options,c);this.canvas=this.options.canvas?this.options.canvas:$("<canvas>").bind("DOMNodeInserted",function(){e.gl||e.initGL()});this.canvas.attr({width:this.options.width,height:this.options.height}).addClass(this.options.canvas_class).data("GLQuad",this);this.parameters={};this.options.canvas&&
!e.gl&&e.initGL()},initGL:function(){this.gl=GLQuad.supported(this.canvas);if(!this.gl){alert("WebGL not supported");throw"Cannot create WebGL context";}this.reset();this.vertex_buffer=this.gl.createBuffer();this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.vertex_buffer);this.gl.bufferData(this.gl.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,1,-1,1,1,-1,1]),this.gl.STATIC_DRAW);if(this.options.vertex&&this.options.fragment)this.createProgram(this.options.vertex,this.options.fragment);else this.options.vertex_path&&
this.options.fragment_path&&this.loadShaders(this.options.vertex_path,this.options.fragment_path)},loadShaders:function(c,e){this.options.vertex="";this.options.fragment="";this.loadShader("vertex",c);this.loadShader("fragment",e)},reset:function(c){this.error="";this.uniforms={};this.controls=[];this.defines={vertex:{},fragment:{}};if(c)this.parameters={}},loadShader:function(c,e){var k=this;$.ajax({url:e,dataType:"text",headers:{"Access-Control-Allow-Origin":"*"},success:function(r){k.options[c]=
r;if(k.options.vertex&&k.options.fragment){k.canvas.trigger("loaded");k.createProgram(k.options.vertex,k.options.fragment)}},error:function(){k.error+="Could not load the "+c+" shader: "+e+"\n";k.canvas.trigger("error")}})},loadTexture:function(c){var e=this.gl.createTexture(),k=new Image,r=this.gl,v=this.gl.TEXTURE_2D;k.src=c;k.onload=function(){r.enable(v);r.bindTexture(v,e);r.texImage2D(v,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,k);r.texParameteri(v,r.TEXTURE_MAG_FILTER,r.LINEAR);r.texParameteri(v,r.TEXTURE_MIN_FILTER,
r.LINEAR_MIPMAP_LINEAR);r.texParameteri(v,r.TEXTURE_WRAP_S,r.REPEAT);r.texParameteri(v,r.TEXTURE_WRAP_T,r.REPEAT);r.generateMipmap(v);r.bindTexture(v,null)};return e},createProgram:function(c,e){var k=this;this.canvas.trigger("before_compile");window.setTimeout(function(){k._createProgram(c,e)},10)},_createProgram:function(c,e){this.reset();var k=this.gl.createProgram(),r=this.parseShader("vertex",c),v=this.parseShader("fragment",e);this.setDefaultParameters();r=this.createShader(this.gl.VERTEX_SHADER,
r,this.defines.vertex);v=this.createShader(this.gl.FRAGMENT_SHADER,v,this.defines.fragment);if(r===null||v===null){console.log("No program");return false}this.gl.attachShader(k,r);this.gl.attachShader(k,v);this.gl.deleteShader(r);this.gl.deleteShader(v);this.gl.linkProgram(k);this.gl.getProgramParameter(k,this.gl.LINK_STATUS)||(this.error+="VALIDATE_STATUS: "+this.gl.getProgramParameter(k,this.gl.VALIDATE_STATUS)+"\nERROR: "+this.gl.getError()+"\n"+e+"\n\n");if(this.error!==""){this.canvas.trigger("error");
return false}else this.glProgram=k;this.options.vertex=c;this.options.fragment=e;this.resize(this.options.width,this.options.height);this.canvas.trigger("ready");return true},parseShader:function(c,e){var k=e.split("\n"),r=[],v,E=k.length,J,L;for(v=0;v<E;v+=1){if(J=k[v].match(/^uniform (float|int|int2|int3|int4|vec2|vec3|vec4|bool|mat2|mat3|mat4)\s*([\w]+)[^\{]*(\{[^\}]+\})?/)){if(J.length===4&&typeof J[3]!=="undefined"){L={type:J[1],name:J[2]};try{$.extend(L,JSON.parse(J[3]))}catch(M){this.error+=
M+"\n"+J[3]+"\n\n";continue}if(this.uniforms[L.name])$.extend(this.uniforms[L.name],L);else{this.uniforms[L.name]=L;this.controls.push(L.name)}if(typeof L.value==="undefined")L.value=L["default"]}}else if(J=k[v].match(/^#define\s*([\w]+)\s*([\w.\-]+)[^\{]*(\{[^\}]+\})?/))if(J.length===4&&typeof J[3]!=="undefined"){L={name:J[1],value:J[2],"default":J[2],constant:true};try{$.extend(L,JSON.parse(J[3]))}catch(X){this.error+=X+"\n"+J[3]+"\n\n";continue}this.defines[c][L.name]=L;continue}r.push(k[v].replace(/\t/g,
"    "))}return r.join("\n")},createShader:function(c,e,k){var r=this.gl,v=r.createShader(c),E=[],J,L,M="";for(J in k)if(k.hasOwnProperty(J)){L="";if(k[J].control==="bool"&&this.parameters[J]===false)L+="//";L+="#define "+J+" "+this.parameters[J];E.push(L)}k[this.options.magic_define]&&E.push("#define "+this.options.magic_define+this.parameters[this.options.magic_define]+" 1");e=E.join("\n")+"\n"+e;r.shaderSource(v,e);r.compileShader(v);if(!r.getShaderParameter(v,r.COMPILE_STATUS)){$.each(r.getShaderSource(v).split("\n"),
function(X,W){M+=X+1+": "+W+"\n"});this.error+=(c===r.VERTEX_SHADER?"VERTEX":"FRAGMENT")+" SHADER:\n"+r.getShaderInfoLog(v)+"\n\n"+M;this.canvas.trigger("error");return null}this.options[c]=e;return v},sendUniforms:function(){for(var c in this.parameters)this.parameters.hasOwnProperty(c)&&this.sendUniform(c)},sendUniform:function(c){var e=this.gl,k=this.parameters[c],r=this.getUniformLocation(c);c=this.uniforms[c];if(r&&c&&k!==null){c=c.type;switch(c){case "float":e.uniform1f(r,k);break;case "int":case "bool":e.uniform1i(r,
k);break;case "vec2":e.uniform2fv(r,k);break;case "int2":e.uniform2iv(r,k);break;case "vec3":e.uniform3fv(r,k);break;case "int3":e.uniform3iv(r,k);break;case "vec4":e.uniform4fv(r,k);break;case "int4":e.uniform4iv(r,k);break;case "mat2":e.uniformMatrix2fv(r,e.FALSE,k);break;case "mat3":e.uniformMatrix3fv(r,e.FALSE,k);break;case "mat4":e.uniformMatrix4fv(r,e.FALSE,k)}}},getUniformLocation:function(c){return this.gl.getUniformLocation(this.glProgram,c)},setDefaultParameters:function(){var c={};c=this.setParameterObj(this.uniforms,
c);if(this.defines.vertex)c=this.setParameterObj(this.defines.vertex,c);if(this.defines.fragment)c=this.setParameterObj(this.defines.fragment,c);this.parameters=c},setParameterObj:function(c,e){for(var k in c)e[k]=!this.parameters||typeof this.parameters[k]==="undefined"||!c[k].label?c[k]["default"]:this.parameters[k];return e},resize:function(c,e){this.canvas.attr({width:c,height:e});this.gl.viewport(0,0,c,e)},getPixels:function(c,e,k,r){var v;k=k||this.options.width;r=r||this.options.height;v=new Uint8Array(k*
r*4);this.gl.readPixels(c||0,e||0,k,r,this.gl.RGBA,this.gl.UNSIGNED_BYTE,v);return v},draw:function(){var c,e=this.gl;if(!this.glProgram)return false;e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT);e.useProgram(this.glProgram);this.sendUniforms();if(this.texture){c=e.getUniformLocation(this.glProgram,"texture");e.uniform1i(c,0);e.activeTexture(e.TEXTURE0);e.bindTexture(e.TEXTURE_2D,this.texture)}e.bindBuffer(e.ARRAY_BUFFER,this.vertex_buffer);c=e.getAttribLocation(this.glProgram,"vertexPosition");
e.vertexAttribPointer(c,2,e.FLOAT,false,0,0);e.enableVertexAttribArray(c);e.drawArrays(e.TRIANGLES,0,6);e.disableVertexAttribArray(c)}};function Camera(c,e,k,r,v){this.x=parseFloat(c||0);this.y=parseFloat(e||0);this.z=parseFloat(k||0);this._pitch=parseFloat(r||0);this._yaw=parseFloat(v||0);this._step=0.1;this.deg2rad=Math.PI/180}
Camera.prototype={step:function(c){if(typeof c!=="undefined")this._step=c;return this._step},pitch:function(c){if(typeof c!=="undefined")this._pitch=c;return this._pitch},yaw:function(c){if(typeof c!=="undefined")this._yaw=c;return this._yaw},forward:function(c){this.move(c||this._step,this._yaw,this._pitch)},back:function(c){this.move(-(c||this._step),this._yaw,this._pitch)},up:function(c){this.move(c||this._step,this._yaw,90)},down:function(c){this.move(c||this._step,this._yaw,-90)},strafeLeft:function(c){this.move(c||
this._step,this._yaw-90,0)},strafeRight:function(c){this.move(c||this._step,this._yaw+90,0)},move:function(c,e,k){var r=c*Math.cos(k*this.deg2rad);this.x+=r*Math.sin(e*this.deg2rad);this.z+=r*Math.cos(e*this.deg2rad);this.y+=c*Math.sin(k*this.deg2rad)},position:function(c){if(typeof c==="object"){this.x=c[0];this.y=c[1];this.z=c[2]}return[this.x,this.y,this.z]}};
function FractalLab(c,e){this.options=$.extend({},{canvas:null,vertex:null,fragment:null,width:400,height:300,preview_width:400,vertex_path:null,fragment_path:null,framerate:null,color_picker:null,ready_callback:null,fps:60,thumbnail_size:128,mode:"3d"},e);this.quad=new GLQuad(this.options);this.gl_quad=this.quad.data("GLQuad");this.ui=$(c);this.tick=0;this.editing=this.updated=this.changed=this.drawing=this.keymove=false;this.keystates={};this.impulse={}}
FractalLab.prototype={init:function(){this.cameraUniform="cameraPosition";this.objRotationUniform="objectRotation";this.moveMultiplier=1;this.init_ui();this.initialized||this.init_events();$("#vertex_code").val(this.gl_quad.options.vertex.replace(/\t/g,"    "));$("#fragment_code").val(this.gl_quad.options.fragment.replace(/\t/g,"    "));window.setTimeout(function(){$("#compile").removeClass("enabled")},100);this.resize();!this.initialized&&this.options.ready_callback&&this.options.ready_callback();
this.initialized=true},init_ui:function(){$("#group_tabs, .group").remove();this.group_tabs=null;this.addControls();this.setControlVisibility();if(this.gl_quad.parameters[this.cameraUniform]){if(typeof this.gl_quad.parameters.cameraPitch!=="undefined"){this.options.mode="3d";this.camera=new Camera(this.gl_quad.parameters[this.cameraUniform][0],this.gl_quad.parameters[this.cameraUniform][1],this.gl_quad.parameters[this.cameraUniform][2],this.gl_quad.parameters.cameraPitch,this.gl_quad.parameters.cameraYaw)}else{this.options.mode=
"2d";this.camera=new Camera(this.gl_quad.parameters[this.cameraUniform][0],this.gl_quad.parameters[this.cameraUniform][1],this.gl_quad.parameters[this.cameraUniform][2],0,0)}this.camera.step(0.0010)}},init_events:function(){var c=this;this.keyEvents();this.mouseDownListener=function(e){if(!c.editing){$(e.target).addClass("moving");c.mouseDown(e)}};this.mouseOverListener=function(){c.keymove=c.editing?false:true};this.mouseOutListener=function(e){c.keymove=false;$(e.target).removeClass("moving")};
this.mouseMoveListener=function(e){c.editing||c.mouseMove(e)};this.mouseUpListener=function(e){c.mouseUp(e);$(e.target).removeClass("moving")};this.mouseWheel=function(e){if(c.keymove){e.preventDefault();e=e.wheelDelta||e.detail;if(e>0)c.impulse.forward=true;else if(e<0)c.impulse.backward=true}};$(window).resize(function(){window.clearTimeout(c.resizeTimeout);c.resizeTimeout=window.setTimeout(function(){c.resize()},200)});this.gl_quad.canvas.parent().get(0).addEventListener("mousedown",this.mouseDownListener,
false);this.gl_quad.canvas.parent().get(0).addEventListener("mouseover",this.mouseOverListener,false);this.gl_quad.canvas.parent().get(0).addEventListener("mouseout",this.mouseOutListener,false);window.addEventListener("DOMMouseScroll",this.mouseWheel,false);window.addEventListener("mousewheel",this.mouseWheel,false);this.gl_quad.canvas.parent().bind("selectstart",function(){return false});$("#scale_size").change(function(e){c.resize(e)});$("#mode").change(function(){c.mode=this.value;c.mode!=="cont"&&
c.framerate.text("");$(this).blur();c.mouseUp()});this.mode=$("#mode").val();if(this.options.framerate){this.framerate=$(this.options.framerate);this.fps=new FPS(60)}},resize:function(){var c=$(this.gl_quad.canvas),e=c.parent(),k=e.width();e=e.height();var r=k/e;if($("#scale_size")[0].checked){k=this.options.preview_width;e=Math.floor(k/r);c.addClass("fit")}else c.removeClass("fit");if(this.gl_quad.parameters.size)this.gl_quad.parameters.size=[k,e];this.gl_quad.options.width=k;this.gl_quad.options.height=
e;this.gl_quad.resize(k,e);this.gl_quad.draw();$("#resolution").text(k+"x"+e+" px");this.main()},load:function(c){$("#vertex_code").val(c.vertex);$("#fragment_code").val(c.fragment);for(var e in c.params)if(typeof c.params["_"+e]!=="undefined")c.params[e]=c.params["_"+e];this.gl_quad.reset();this.gl_quad.parameters=c.params;this.default_params=this.gl_quad.parameters;this.stepSpeed=c.params.stepSpeed;this.recompile()},load_by_path:function(c,e){this.default_params=this.gl_quad.parameters;this.gl_quad.reset(true);
this.gl_quad.loadShaders(c,e)},reset_params:function(){this.gl_quad.parameters=this.default_params||this.gl_quad.parameters;this.recompile()},params:function(c){var e=Math.round(this.options.thumbnail_size*this.gl_quad.options.height/this.gl_quad.options.width),k=$("<canvas>").attr({width:this.options.thumbnail_size,height:e}).get(0);k.getContext("2d").drawImage(this.canvas(),0,0,this.options.thumbnail_size,e);return{title:c,vertex:$("#vertex_code").val(),fragment:$("#fragment_code").val(),thumbnail:k.toDataURL("image/png"),
params:JSON.stringify(this.gl_quad.parameters)}},recompile:function(){$("#log").text("");for(var c in this.gl_quad.parameters)if(typeof this.gl_quad.parameters["_"+c]!=="undefined")this.gl_quad.parameters[c]=this.gl_quad.parameters["_"+c];this.gl_quad.createProgram($("#vertex_code").val(),$("#fragment_code").val())},setControlVisibility:function(){for(var c in this.gl_quad.parameters)this.gl_quad.getUniformLocation(c)||this.gl_quad.defines.vertex[c]||this.gl_quad.defines.fragment[c]?$("#control_"+
c).show():$("#control_"+c).hide();$(".group").first().show();$("#group_tabs a").first().addClass("active");$("#group_tabs a").click(function(){$(".group").hide();$("#group_tabs a").removeClass("active");$(this).addClass("active");$("#group_"+$(this).text()).show()})},addControls:function(){var c,e;this.ui.html("");if(!this.group_tabs){this.group_tabs=$('<div id="group_tabs">');this.ui.append(this.group_tabs)}if(this.gl_quad.defines.vertex)for(c in this.gl_quad.defines.vertex)this.gl_quad.defines.vertex.hasOwnProperty(c)&&
this.addControl(this.gl_quad.defines.fragment[c]);if(this.gl_quad.defines.fragment)for(c in this.gl_quad.defines.fragment)this.gl_quad.defines.fragment.hasOwnProperty(c)&&this.addControl(this.gl_quad.defines.fragment[c]);c=0;for(e=this.gl_quad.controls.length;c<e;c+=1)this.addControl(this.gl_quad.uniforms[this.gl_quad.controls[c]]);this.addControl({control:"range",group:"Camera",label:"Speed",min:0.01,max:1,step:0.01,decimal_places:2,"default":this.stepSpeed||0.5,name:"stepSpeed"});this.objRotationX=
$("#"+this.objRotationUniform+"_0").data("superslider");this.objRotationY=$("#"+this.objRotationUniform+"_1").data("superslider")},addControl:function(c){var e,k,r,v,E;v=false;if(c.label){r=$("<p>").attr("id","control_"+c.name);E=c.group||"Constants";v=false;if(c.group_label){e=$("<h3>").text(c.group_label);r.append(e)}if(c.control==="color"){this.createControl(r,c);v=true}else if(typeof c["default"]==="object"){e=0;for(k=c["default"].length;e<k;e+=1){v=c["default"]&&c["default"][e];if(typeof this.gl_quad.parameters[c.name]!==
"undefined")v=this.gl_quad.parameters[c.name][e];v={name:c.name+"_"+e,label:typeof c.label==="object"?c.label[e]:c.label,min:c.min,max:c.max,step:c.step,"default":v,control:c.control,group_label:e===0&&c.group_label};this.createControl(r,v);v=true}}else{c["default"]=typeof this.gl_quad.parameters[c.name]!=="undefined"?this.gl_quad.parameters[c.name]:c["default"];c.control=c.control||c.type;this.createControl(r,c);v=true}if(v&&$("#group_"+E).length===0){c=$('<div id="group_'+E+'" class="group">');
this.group_tabs.append($("<a>").addClass("tab").text(E));this.ui.append(c)}$("#group_"+E).append(r)}},createControl:function(c,e){var k=e.name.split("_"),r=this,v,E,J;e.decimal_places=4;e.control=e.control||"range";if(e.control.match(/vec|float|range|int|rotation*/)){v=new SuperSlider(e.name,e);c.append(v)}else if(e.control==="camera"){this.cameraUniform=k[0];e.hide_slider=true;e.min=-100;e.max=100;e.step=0.0010;e.decimal_places=6;v=new SuperSlider(e.name,e);c.append(v)}else if(e.control==="input"){e.hide_slider=
true;v=new SuperSlider(e.name,e);c.append(v)}else if(e.control==="color"){if($("#"+e.name).length===0){v=typeof this.gl_quad.parameters[e.name]!=="undefined"?new Color([this.gl_quad.parameters[e.name][0]*255,this.gl_quad.parameters[e.name][1]*255,this.gl_quad.parameters[e.name][2]*255]):new Color([e["default"][0]*255,e["default"][1]*255,e["default"][2]*255]);v=$("<label>").addClass("color_selection").text(e.label).prepend($("<span>").attr("id",e.name).addClass("color_swatch").css("backgroundColor",
"#"+v.hex()).click(function(L){r.setColor(L)}));c.append(v)}}else if(e.control==="select"){c.append($("<label>").attr("for",e.name).text(e.label));v=$("<select>").attr("id",e.name);for(E=0;E<e.options.length;E+=1){J=$("<option>").attr("value",e.options[E]).text(e.options[E]);v.append(J)}v.val(e["default"]);c.append(v)}else if(e.control==="bool"){v=$("<input>").attr({type:"checkbox",id:e.name,value:e.value||e["default"]});c.append($("<label>").attr("for",e.name).text(e.label).prepend(v));this.gl_quad.parameters[e.name]!==
false&&typeof this.gl_quad.parameters[e.name]!=="undefined"&&v.attr("checked",true)}v&&v.bind("change",function(L){r.controlListener(L,k,e)})},controlListener:function(c,e,k){if(k.constant){this.gl_quad.parameters[e[0]]=k.control==="bool"?c.target.checked?c.target.value:false:c.target.val||c.target.value;$("#compile").addClass("enabled")}else{if(e.length>1)if(k.control==="rotation"){k=[];for(c=0;c<3;c+=1)k[c]=$("#"+e[0]+"_"+c).data("slider").value();this.gl_quad.parameters["_"+e[0]]=k;this.gl_quad.parameters[e[0]]=
this.rotationMatrix(k)}else this.gl_quad.parameters[e[0]][parseFloat(e[1])]=c.target.val;else{this.gl_quad.parameters[e[0]]=k.control==="bool"?c.target.checked?true:false:c.target.val;if(e[0]==="stepSpeed"){c=Math.pow(c.target.val,2)/100;this.camera.step(c)}}this.changed=true}e[0]===this.cameraUniform&&this.camera.position(this.gl_quad.parameters[this.cameraUniform])},setColor:function(c){var e=this,k=$(c.target);c=k.css("backgroundColor").replace(/[^0-9,]/g,"").split(",");var r=this.options.color_picker.data("color_picker"),
v,E;this.options.color_picker.unbind("change").bind("change",function(J,L){if(L){k.css("backgroundColor",L.css());e.gl_quad.parameters[k.attr("id")]=L.normalized();window.clearTimeout(v);v=window.setTimeout(function(){e.changed=true},100)}});r.setColor(c);$("#color_picker").unbind("mouseover mouseout").bind("mouseover",function(){e.options.color_picker.addClass("show_picker");window.clearTimeout(E)}).bind("mouseout",function(){window.clearTimeout(E);E=window.setTimeout(function(){$("#color_picker").hide()},
100)}).toggle()},interacting:function(c){if(c){this.editing=false;this.keyEvents();this.main()}else{this.editing=true;$(document).unbind("keydown keyup");window.clearInterval(this.key_listener_id)}},keyEvents:function(){var c=this;this.keystates={};$(document).bind("keydown",function(e){c.moveMultiplier=1;if(e.shiftKey){c.moveMultiplier=10;c.keystates.shiftKey=true}if(e.altKey){c.moveMultiplier=0.1;c.keystates.altKey=true}if(e.ctrlKey)c.keystates.ctrlKey=true;if(e.metaKey)c.keystates.metaKey=true;
if(c.keymove)c.keystates[e.which]=true}).bind("keyup",function(e){c.keystates[e.which]=false;c.moveMultiplier=1;if(e.shiftKey)c.moveMultiplier=10;else c.keystates.shiftKey=false;if(e.altKey)c.moveMultiplier=0.1;else c.keystates.altKey=false;if(!e.ctrlKey)c.keystates.ctrlKey=false;if(!e.metaKey)c.keystates.metaKey=false;c.keymove&&c.updateUI()})},keyListener:function(){var c;Date.now();var e=this.moveMultiplier;this.tick+=1;if(this.options.mode==="2d")e*=5*this.camera.z;if(this.keystates[38]||this.keystates[87]||
this.impulse.forward){this.changed=true;this.camera.forward(this.camera.step()*e)}else if(this.keystates[40]||this.keystates[83]||this.impulse.backward){this.changed=true;this.camera.back(this.camera.step()*e)}if(this.keystates[81]){this.changed=true;this.camera.down(this.camera.step()*e)}else if(this.keystates[69]){this.changed=true;this.camera.up(this.camera.step()*e)}if(this.keystates[90]){this.keystates[90]=false;this.changed=true;c=$("#stepSpeed").data("superslider").value()*e/2;$("#stepSpeed").data("superslider").value(c)}else if(this.keystates[88]){this.keystates[88]=
false;this.changed=true;c=$("#stepSpeed").data("superslider").value()*e*2;$("#stepSpeed").data("superslider").value(c)}if(this.keystates[37]||this.keystates[65]){this.changed=true;this.camera.strafeLeft(this.camera.step()*e)}else if(this.keystates[39]||this.keystates[68]){this.changed=true;this.camera.strafeRight(this.camera.step()*e)}if(this.changed||this.mode==="cont"){this.camera&&this.updateCamera();this.gl_quad.draw();Date.now();this.updated=this.changed=false;this.impulse={};if(this.framerate&&
this.tick>30&&this.mode==="cont"){c=this.fps.display();this.framerate.text("FPS: "+c+" ("+Math.round(1/c*1E4)/10+"ms)");this.tick=0}}},autoDraw:function(){this.gl_quad.draw()},mouseDown:function(c){this.ox=c.clientX;this.oy=c.clientY;this.gl_quad.canvas[0].addEventListener("mousemove",this.mouseMoveListener,false);document.addEventListener("mouseup",this.mouseUpListener,false)},mouseMove:function(c){var e=c.clientY-this.oy;this.u=(c.clientX-this.ox)*0.5;this.v=e*0.5;if(this.options.mode==="3d")if(this.keystates.metaKey){e=
this.objRotationY.value()+this.u;if(e>360)e=-360+e%360;else if(e<-360)e=360+e%360;this.objRotationY.value(e);e=this.objRotationX.value()+this.v;if(e>360)e=-360+e%360;else if(e<-360)e=360+e%360;this.objRotationX.value(e)}else{this.gl_quad.parameters.cameraYaw+=this.u;if(this.gl_quad.parameters.cameraYaw>180)this.gl_quad.parameters.cameraYaw=-180+this.gl_quad.parameters.cameraYaw%180;else if(this.gl_quad.parameters.cameraYaw<-180)this.gl_quad.parameters.cameraYaw=180+this.gl_quad.parameters.cameraYaw%
180;this.gl_quad.parameters.cameraPitch-=this.v}else if(this.options.mode==="2d"){e=4*this.camera.z*this.moveMultiplier/this.gl_quad.canvas.width();this.camera.x-=this.u*e;this.camera.y+=this.v*e}this.ox=c.clientX;this.oy=c.clientY;this.changed=true},mouseUp:function(){this.gl_quad.canvas[0].removeEventListener("mousemove",this.mouseMoveListener,false);document.removeEventListener("mouseup",this.mouseUpListener,false);this.updateUI()},updateCamera:function(){this.camera.pitch(this.gl_quad.parameters.cameraPitch||
0);this.camera.yaw(this.gl_quad.parameters.cameraYaw||0);this.gl_quad.parameters[this.cameraUniform][0]=this.camera.x;this.gl_quad.parameters[this.cameraUniform][1]=this.camera.y;this.gl_quad.parameters[this.cameraUniform][2]=this.camera.z},updateUI:function(){if(this.camera){$("#"+this.cameraUniform+"_0").data("superslider").value(this.camera.x);$("#"+this.cameraUniform+"_1").data("superslider").value(this.camera.y);$("#"+this.cameraUniform+"_2").data("superslider").value(this.camera.z);$("#cameraPitch").data("superslider")&&
$("#cameraPitch").data("superslider").value(this.gl_quad.parameters.cameraPitch);$("#cameraPitch").data("superslider")&&$("#cameraYaw").data("superslider").value(this.gl_quad.parameters.cameraYaw)}this.updated=true},rotationMatrix:function(c){var e=Math.PI/180,k={x:Math.cos(c[0]*e),y:Math.cos(c[1]*e),z:Math.cos(c[2]*e)};c={x:Math.sin(c[0]*e),y:Math.sin(c[1]*e),z:Math.sin(c[2]*e)};return[k.y*k.z,-k.y*c.z,c.y,k.z*c.x*c.y+k.x*c.z,k.x*k.z-c.x*c.y*c.z,-k.y*c.x,-k.x*k.z*c.y+c.x*c.z,k.z*c.x+k.x*c.y*c.z,
k.x*k.y]},imageData:function(){return this.gl_quad.getPixels()},canvas:function(){return this.quad[0]},main:function(){var c=this;window.clearInterval(this.key_listener_id);this.key_listener_id=window.setInterval(function(){c.fps&&c.fps.capture();c.keyListener()},1E3/this.options.fps)}};
function SQLAdapter(c,e){this.options=$.extend({},{version:"1.0",name:c,display_name:c,max_size:10485760},e);this.query="";this.values=[];this.results=null;if(window.openDatabase)return this.init();else{console.error("Database not supported");return false}}
SQLAdapter.prototype={init:function(){try{this.db=window.openDatabase(this.options.name,this.options.version,this.options.display_name,this.options.max_size);return this}catch(c){console.error(this.errorMessage(c))}return false},createTable:function(c,e,k,r,v){c="CREATE TABLE IF NOT EXISTS `"+c+"` (";var E=[],J,L;k!==false&&E.push("id INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT");for(k=0;k<e.length;k+=1){J=e[k];L="`"+J.name+"`";switch(J.type){case "text":L+=" TEXT";break;case "mediumtext":L+=" MEDIUMTEXT";
break;case "integer":L+=" INTEGER";break;case "datetime":L+=" DATETIME";break;case "bool":L+=" SMALLINT(1)";L+=J["default"]?" DEFAULT `0`":" DEFAULT `1` ";break;default:L+=" VARCHAR(255)"}if(J["default"]&&J.type!=="bool")L+=" DEFAULT `"+J["default"]+"`";L+=J["null"]===false||J.type==="bool"||J["default"]?" NOT NULL":" NULL";E.push(L)}c+=E.join(", ")+")";this.execute(c,[],r,v)},dropTable:function(c){this.execute("DROP TABLE `"+c+"`")},execute:function(c,e,k,r){var v=this;this.values=e||[];this.query=
c;this.db.transaction(function(E){E.executeSql(v.query,v.values,k||v.dataHandler,r||v.errorHandler)})},nullDataHandler:function(){},errorHandler:function(c,e){console.error("Error ("+e.code+"): "+e.message)},dataHandler:function(c,e){this.results=e},list:function(c){var e=[],k,r,v,E;if((this.results=c||this.results)&&this.results.rows){v=0;for(E=this.results.rows.length;v<E;v+=1){r=this.results.rows.item(v);c={};for(k in r)if(r.hasOwnProperty(k))c[k]=r[k];e.push(c)}}return e},version:function(){return this.db.version},
connection:function(){return this.db},errorMessage:function(c){var e=["Unknown error: "+c,"Error 1: Other database related error.","Error 2: The version of this database is not the version requested.","Error 3: Data set too large.","Error 4: Storage limit exceeded.","Error 5: Lock contention error.","Error 6: Constraint error.","Error 7: Timeout error."];return e[c]||e[0]}};function SQLStore(c,e){this.options=$.extend({},{db_name:"fractal_lab",table_name:"presets"},c);return this.init(e)}
SQLStore.prototype={init:function(c){var e=[{name:"title",type:"string"},{name:"params",type:"text"},{name:"vertex",type:"text"},{name:"fragment",type:"text"},{name:"thumbnail",type:"mediumtext"},{name:"created_at",type:"datetime"},{name:"updated_at",type:"datetime"}];if(this.db=new SQLAdapter(this.options.db_name))this.db.createTable(this.options.table_name,e,true,c);else return false;return this},index:function(c){this.query("SELECT * FROM `"+this.options.table_name+"` ORDER BY title ASC",[],c)},
find:function(c,e){this.query("SELECT * FROM `"+this.options.table_name+"` WHERE id = ?",[c],e)},find_by_title:function(c,e){this.query("SELECT * FROM `"+this.options.table_name+"` WHERE title = ?",[c],e)},save:function(c,e,k){c?this.update(c,e,k):this.create(e,k)},create:function(c,e){var k=Date.now();this.query("INSERT INTO `"+this.options.table_name+"` (title, params, vertex, fragment, thumbnail, created_at, updated_at) VALUES (?,?,?,?,?,?,?);",[c.title,c.params,c.vertex,c.fragment,c.thumbnail,
k,k],e)},update:function(c,e,k){var r=Date.now();this.query("UPDATE `"+this.options.table_name+"` SET title = ?, params = ?, vertex = ?, fragment = ?, thumbnail = ?, updated_at = ?WHERE id = ?",[e.title,e.params,e.vertex,e.fragment,e.thumbnail,r,c],k)},destroy:function(c,e){Date.now();this.query("DELETE FROM `"+this.options.table_name+"` WHERE id = ?",[c],e)},query:function(c,e,k){var r=this;this.db.execute(c,e,function(v,E){typeof k==="function"&&k(r.db.list(E))})}};
function LocalStorageAdapter(c,e){this.index_key=c||"local_index";this.prefix_key=e||"store_";return typeof localStorage==="undefined"?false:this}
LocalStorageAdapter.prototype={index:function(c){var e=[],k=this;$.each(this._index(),function(r,v){e.push(_.extend({id:v.id},k.readLocalStorage(v.id)))});row=_.sortBy(e,function(r){return r.title.toLowerCase()});c(e)},find:function(c,e){var k=this.readLocalStorage(c);e(k?[k]:[])},find_by_title:function(c,e){this.find(this.find_index("title",c),e)},find_index:function(c,e){var k,r,v,E=this._index();k=0;for(r=E.length;k<r;k+=1)if(E[k][c]===e){v=E[k].id;break}return v},save:function(c,e,k){c=Date.now();
var r=this.find_index("title",e.title)||this.prefix_key+c;console.log("save",r,e);this.updateIndex({id:r,title:e.title,updated_at:c});k(this.writeLocalStorage(r,e))},updateIndex:function(c){var e=this._index(),k,r,v;r=0;for(v=e.length;r<v;r+=1)if(e[r].id===c.id){e[r]=c;k=true;break}k||e.push(c);this.writeLocalStorage(this.index_key,e)},destroy:function(c,e){var k=this._index(),r,v,E=false;console.log("delete",c);try{localStorage.removeItem(c);r=0;for(v=k.length;r<v;r+=1)if(k[r].id===c){k.splice(r,
1);this.writeLocalStorage(this.index_key,k);E=true;break}}catch(J){console.error("localStorage removeItem error",J)}e(E)},_index:function(){return this.readLocalStorage(this.index_key)||[]},readLocalStorage:function(c){var e;try{e=JSON.parse(localStorage.getItem(c))}catch(k){console.error("Read local storage error",k)}return e},writeLocalStorage:function(c,e){var k=false;try{localStorage.setItem(c,JSON.stringify(e));k=true}catch(r){alert("Local storage quota exceeded. Could not save!")}return k}};
PresetManager=function(c){if(window.openDatabase)this.backend=new SQLStore({},c);if(!this.backend){this.backend=new LocalStorageAdapter("preset_index","preset_");_.defer(c)}};PresetManager.prototype={all:function(c){this.backend.index(c)},find:function(c,e){this.backend.find(c,e)},find_by_title:function(c,e){this.backend.find_by_title(c,e)},save:function(c,e,k){this.backend.save(c,e,k)},destroy:function(c,e){this.backend.destroy(c,e)}};
var fractal_library=function(c){function e(M){$.ajax({url:M,dataType:"script",headers:{"Access-Control-Allow-Origin":"*"},success:function(){k([{path:"3d_fractals.vs",type:"vertex"},{path:"3d_fractals.fs",type:"fragment"}],presets.presets3d);k([{path:"2d_fractals.vs",type:"vertex"},{path:"2d_fractals.fs",type:"fragment"}],presets.presets2d)},error:function(X,W,Y){console.log(W,Y)}})}function k(M,X){var W=0,Y={};$.each(M,function(ia,ja){$.ajax({url:"shaders/"+ja.path,dataType:"text",headers:{"Access-Control-Allow-Origin":"*"},
success:function(ra){W+=1;Y[ja.type]=ra;W===M.length&&r(Y,X)}})})}function r(M,X){var W=0,Y=function(){if(W>=X.length){localStorage.setItem("fractal_lab_initialised",true);v()}else{var ia=X[W],ja;L.find_by_title(ia.title,function(ra){if(ra.length===0){try{ja=JSON.parse(ia.params)}catch(va){console.log("error adding preset",ia.title)}L.save(null,{title:ia.title,vertex:M.vertex,fragment:M.fragment,thumbnail:ia.thumbnail||null,params:JSON.stringify(ja)},function(){_.defer(Y)})}else{W+=1;_.defer(Y)}});
W+=1}};_.defer(Y)}function v(){console.log("list shaders");var M=$("#presets");L.all(function(X){M.html("");$.each(X,function(W,Y){var ia=new Image,ja=$("<div>").addClass("preset").addClass(Y.title===J?"updated":"").append($("<a>").data("id",Y.id).attr({title:"cmd + click to only load parameters"}).addClass("thumbnail").html("&nbsp;")).append($("<div>").addClass("preset_title").append($("<a>").data("id",Y.id).attr("title","Click to delete").addClass("destroy").html("[-]")).append($("<a>").data("id",
Y.id).attr("title","Click to show params for copying").addClass("more").text("[+]")).append($("<a>").addClass("title").data("id",Y.id).attr({title:"cmd + click to only load parameters"}).text(Y.title)).append($("<textarea>").addClass("params").text((Y.params||"").replace(/,"/g,', "'))));if(Y.thumbnail){ia.onload=function(){$(".thumbnail",ja).html(ia)};ia.src=Y.thumbnail}M.append(ja)})})}function E(M){c.load(M);$("#paste_block").hide();$("#paste_input").val("");$("#image_tab").trigger("click");$("#library").hide();
$("#library_button").text("Fractal library");$("#type_buttons a").removeClass("active");typeof M.params.cameraPitch!=="undefined"?$("#3d").addClass("active"):$("#2d").addClass("active")}var J="",L=new PresetManager(function(){localStorage.getItem("fractal_lab_initialised")?v():e("javascripts/presets.js")});$("#library_button").click(function(M){M.preventDefault();$("#mode").val("auto");if($("#library:visible").length>0){$("#library_button").text("Fractal library");$("#paste_block").hide();$("#paste_input").val("");
$("#library").hide()}else{$("#library_button").text("Close");$("#library").show();$("#library_list").attr("scrollTop",$("#library_list").data("scrollTop")||0)}});$("#save_fractal, #save").click(function(M){M.preventDefault();if($("body").hasClass("ready")){var X=prompt("Enter a title for the fractal:",J),W=function(){J=X;v()};L.find_by_title(X,function(Y){if(Y[0]&&J!==X)if(!confirm("Replace '"+X+"' in the library?"))return;L.save(Y[0]&&Y[0].id,c.params(X),W)})}});$("#paste_params").click(function(M){M.preventDefault();
if($("#paste_block:visible").length>0)$("#paste_block").hide();else{$("#paste_block").show().focus();$("#paste_input").val("").focus();$("#library_list").attr("scrollTop",0)}});$("#cancel_paste").click(function(M){M.preventDefault();$("#paste_block").hide();$("#paste_input").val("")});$("#apply_paste").click(function(M){M.preventDefault();var X;try{X={title:J,vertex:$("#vertex_code").val(),fragment:$("#fragment_code").val(),params:JSON.parse($("#paste_input").val())}}catch(W){alert(W);return}E(X)});
$(".preset a.title, .preset a.thumbnail").live("click",function(M){M.preventDefault();var X=$(M.currentTarget).data("id");L.find(X,function(W){if(W=W[0]){J=W.title;try{W.params=JSON.parse(W.params)}catch(Y){console.error("JSON error",Y,W.params);alert("Error loading fractal");return}if(M.metaKey){W.fragment=$("#fragment_code").val();W.vertex=$("#vertex_code").val()}E(W)}else console.log("Could not find",X)})});$(".more").live("click",function(M){var X=$("textarea",$(M.target).parent());M.preventDefault();
$("#paste_block").show();$("#paste_input").val(X.val()).focus();$("#library_list").attr("scrollTop",0)});$(".destroy").live("click",function(M){M.preventDefault();confirm("Are you sure you want to delete this?")&&L.destroy($(M.target).data("id"),v)});$("#library_list").bind("scroll",function(M){$(M.target).data("scrollTop",M.target.scrollTop)})};function FPS(c){this.lastUpdated=0;this.samples=[];this.fps=0;this.average_over=c||10}
FPS.prototype={capture:function(){var c=Date.now();this.samples.push(c-this.lastUpdated);this.samples.length>this.average_over&&this.samples.shift();this.lastUpdated=c},display:function(){var c=0,e,k=this.samples.length;if(k<2)return 0;for(e=0;e<k;e+=1)c+=this.samples[e];return Math.round(1E4/(c/k))/10}};
var application=function(){var c=new ColorPicker({vertex_path:"shaders/color_picker.vs",fragment_path:"shaders/color_picker.fs",width:128,height:128}),e=new FractalLab($("#params"),{canvas:$("#canvas"),framerate:$("#average_fps"),color_picker:c,ready_callback:function(){$("#library").trigger("load_presets")}});$("#color_picker").append(c);document.documentElement.webkitRequestFullScreen||document.documentElement.requestFullScreen?$("#fullscreen").click(function(){if(document.documentElement.webkitRequestFullScreen)document.documentElement.webkitRequestFullScreen();
else document.documentElement.requestFullScreen&&document.documentElement.requestFullScreen()}):$("#fullscreen").hide();$("#vertex_code, #fragment_code").change(function(){$("#compile").addClass("enabled")}).bind("keydown",function(k){var r=$(k.target),v,E=r[0].selectionStart;v=r[0].selectionEnd;if(k.which===9){v=r.val().substring(0,E)+"    "+r.val().substring(v);r.val(v);r[0].setSelectionRange(E+4,E+4);r.focus();k.preventDefault()}$("#compile").addClass("enabled")}).bind("scroll",function(k){$(k.target).data("scrollTop",
k.target.scrollTop)});$("#menu .image_tab, #menu .code_tab").click(function(k){k=$(k.target);var r=$("#"+k.data("for")),v=$("textarea",r);if(!k.hasClass("active")){$("#menu a").removeClass("active");k.addClass("active");$(".panel").hide();r.show();v.length>0&&v.attr("scrollTop",v.data("scrollTop"))}e.interacting(k.data("for")==="stage");return false});$("#save_image").click(function(k){k.preventDefault();if($("body").hasClass("ready")){k=new Image;k.src=e.canvas().toDataURL("image/png");$("#render_panel p").after(k);
$("#render_tab").trigger("click")}});$("#canvas").bind("before_compile",function(){$("#compiling").show()}).bind("ready",function(){e.init();$("#log").text("Shader compiled ok.");$("#image_tab").trigger("click");$("#compiling").hide();$("#compile").text("Recompile");$("body").addClass("ready");$("#menu a:first").trigger("click");$("#compile").unbind("click").click(function(){$(this).hasClass("enabled")&&e.recompile();return false})}).bind("loaded",function(){}).bind("error",function(k){$("#log").text($(k.target).data("GLQuad").error);
$("#compiling").hide();$("#log_tab").trigger("click");$("#compile").addClass("enabled")});$("#type_buttons a").not("#reset").click(function(){$("#type_buttons a").removeClass("active");$(this).addClass("active");e.load_by_path("shaders/"+this.id+"_fractals.vs?"+Date.now(),"shaders/"+this.id+"_fractals.fs?"+Date.now())});$("#help_button").click(function(){$("#help").toggle()});$("#help").click(function(k){$(k.target).is("a")||$("#help").hide()});$("#compile").click(function(){$("#3d").trigger("click");
$("#compile").unbind("click");return false});$("#reset").click(function(){e.reset_params();return false});$("body").click(function(k){if(!k.target.href||!k.target.href.match(/^http\:\/\//)){$("body").removeClass("initialising").unbind("click");$("#help").hide()}});fractal_library(e)};
